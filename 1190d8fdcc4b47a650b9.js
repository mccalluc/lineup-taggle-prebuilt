/*! lineup - v1.0.0-20180405-195047 - 2018
* http://caleydo.org/tools/taggle
* Copyright (c) 2018 Samuel Gratzl; Licensed BSD-3-Clause*/
webpackJsonp([2,11],{213:function(t,e,r){"use strict";function n(t,e){return e?new g(t,r.i(b.a)(e)):new g(t,r.i(b.b)())}function i(t,e,n){return new g(t,r.i(b.a)(r.i(b.c)(e,n)))}function o(t,e){return t.map(function(t){var r={};return e.forEach(function(e,n){return r[e]=t[n]}),r})}function u(t,e){return t.map(function(t){return e.map(function(e){return t[e]})})}function s(t,e,n,i,o){void 0===o&&(o={});var u=r.i(f.b)(r.i(d.a)(),{columns:t,size:[e.length,t.length]},o),s=o.rowassigner||r.i(l.e)(),a=function(){var t={rowIds:s(e),rows:e,objs:n,data:i};return Promise.resolve(t)};return new g(u,r.i(b.a)(a))}function a(t,e){void 0===e&&(e={});var n=t.map(function(t){return t[0]}),i=t[0].slice(1),u=t.slice(1).map(function(t){return t.slice(1)}),a=i.map(function(t,e){return{name:t,column:t,value:r.i(h.a)(u.map(function(t){return t[e]}))}}),c=u.map(function(t){return a.map(function(e,r){return e.value.type===h.g||e.value.type===h.f?parseFloat(t[r]):t[r]})}),p=o(c,i);return s(a,n,p,c,e)}function c(t,e){void 0===e&&(e={});var n=e.keyProperty||"_id",i=t.map(function(t,e){return String(t[n]||e)}),o=Object.keys(t[0]),a=t,c=u(a,o);return s(o.map(function(t,e){return{name:t,column:t,value:r.i(h.a)(c.map(function(t){return t[e]}))}}),i,a,c,e)}Object.defineProperty(e,"__esModule",{value:!0});var p=r(24),f=r(12),_=r(217),l=r(221),h=r(227),d=r(269),y=r(268),m=r(271),b=r(272);e.create=n,e.wrapObjects=i,e.asTableFromArray=a,e.asTable=c;var g=function(t){function e(e,r){var n=t.call(this,null)||this;return n.desc=e,n.loader=r,e.columns.forEach(function(t){return t.column=t.column||t.name}),n.root=n,n.vectors=e.columns.map(function(t,e){return new m.a(n,e,t)}),n}return p.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return r.i(l.a)(this.desc.idtype||this.desc.rowtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=r.i(_.e)()),r.i(_.c)(t).filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return p.b(this,void 0,void 0,function(){return p.c(this,function(n){switch(n.label){case 0:return[4,this.colData(this.col(e).column,r.i(_.a)(t))];case 1:return[2,n.sent()[0]]}})})},e.prototype.queryView=function(t,n){return new e(this.desc,r.i(b.a)(this.loader.view(this.desc,t,n)))},e.prototype.data=function(t){return void 0===t&&(t=r.i(_.e)()),this.loader.data(this.desc,r.i(_.c)(t))},e.prototype.colData=function(t,e){return void 0===e&&(e=r.i(_.e)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){return void 0===e&&(e=r.i(_.e)()),this.loader.col(this.desc,t,r.i(_.c)(e))},e.prototype.objects=function(t){return void 0===t&&(t=r.i(_.e)()),this.loader.objs(this.desc,r.i(_.c)(t))},e.prototype.rows=function(t){return void 0===t&&(t=r.i(_.e)()),this.loader.rows(this.desc,r.i(_.c)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=r.i(_.e)()),this.loader.rowIds(this.desc,r.i(_.c)(t))},e.prototype.ids=function(t){return void 0===t&&(t=r.i(_.e)()),this.rowIds(t)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(y.a);e.default=g},217:function(t,e,r){"use strict";function n(t){return void 0===t&&(t=null),null===t?r.i(_.a)():t instanceof _.b?t:Array.isArray(t)?Array.isArray(t[0])?o.apply(void 0,t):o(t):r.i(l.a)(Array.from(arguments).map(String).join(","))}function i(){if(0===arguments.length)return r.i(_.a)();var t=new _.b;return Array.isArray(arguments[0])?Array.from(arguments).forEach(function(e,r){0!==e.length&&t.dim(r).setSlice(e[0],e[1],e[2])}):"[object Object]"===Object.prototype.toString.call(arguments[0])?Array.from(arguments).forEach(function(e,r){t.dim(r).setSlice(e.from,e.to,e.step)}):"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function o(){if(0===arguments.length)return r.i(_.a)();if(Array.isArray(arguments[0])&&arguments[0][0]instanceof c.a)return new _.b(arguments[0]);if(Array.isArray(arguments[0])){var t=new _.b;return Array.from(arguments).forEach(function(e,r){e instanceof c.a?t.dims[r]=e:t.dim(r).setList(e)}),t}if("number"==typeof arguments[0]){var e=new _.b;return e.dim(0).setList(Array.from(arguments)),e}return arguments[0]instanceof c.a?new _.b(Array.from(arguments)):r.i(_.c)()}function u(){if(0===arguments.length)return r.i(_.a)();var t=arguments[0];return Array.isArray(t)||(t=Array.from(arguments)),new _.b(t.map(function(t){return t.dim(0)}))}function s(t){return new f.a("unnamed","gray",t)}function a(t,e){return new p.a(t,e)}var c=r(219),p=r(223),f=r(225),_=r(224),l=r(234);r.d(e,"l",function(){return _.b}),r.d(e,"e",function(){return _.a}),r.d(e,"b",function(){return _.c}),r.d(e,"d",function(){return c.a}),r.d(e,"g",function(){return p.a}),r.d(e,"i",function(){return f.a}),e.c=n,e.k=i,e.a=o,e.f=u,e.h=s,e.j=a},218:function(t,e,r){"use strict";function n(t){if(!t)return u.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return u.ADD;case"remove":return u.REMOVE;default:return u.SET}return+t}function i(t,e){for(;t.ndim<e;)t.dims[t.ndim]=o.d.none();return t}var o=r(217);r.d(e,"b",function(){return s}),r.d(e,"a",function(){return u}),e.c=n,e.d=i;var u,s="selected";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(u||(u={}))},219:function(t,e,r){"use strict";function n(t,e){return t-e}var i=r(228),o=r(222),u=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([i.a.all()])},t.single=function(e){return new t([i.a.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[i.a.single(t[0])];for(var e=[],r=t.slice(1).map(function(e,r){return e-t[r]}),n=0,o=1,u=0;o<t.length;){for(;r[n]===r[o-1]&&o<t.length;)o++;if(o===n+1)e.push(i.a.single(t[n]));else if(1===r[n])e.push(i.a.range(t[n],t[o-1]+r[n],r[n]));else for(u=n;u<o;u++)e.push(i.a.single(t[u]));n=o,o+=1}for(;n<t.length;)e.push(i.a.single(t[n++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?i.a.parse(t.toString()):"number"==typeof t?i.a.single(t):Array.isArray(t)?new i.a(t[0],t[1],t[2]):t}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(n=this.arr).push.apply(n,e.map(t));var n},t.prototype.pushSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.push(new i.a(t,e,r))},t.prototype.pushList=function(e){(r=this.arr).push.apply(r,t.compress(e));var r},t.prototype.setSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.length=0,this.pushSlice(t,e,r)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?i.a.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var r=this.arr.slice(),n=1;n<e;++n)r.push.apply(r,this.arr);return new t(r)},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var n=this.iter(r).asList(),i=function(t){var e=t.iter(n.length),r=[];return e.forEach(function(t){t>=0&&t<n.length&&r.push(n[t])}),t.fromLike(r)};if("function"==typeof e.fromLikeComposite){var o=e;return o.fromLikeComposite(o.groups.map(i))}return i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var r=this.iter(e).asList();return t.iter(e).forEach(function(t){r.indexOf(t)<0&&r.push(t)}),t.fromLike(r.sort(n))},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var i=this.iter(r).asList(),o=e.iter(r),u=[];return o.forEach(function(t){i.indexOf(t)>=0&&u.push(t)}),e.fromLike(u.sort(n))},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var i=this.iter(r),o=e.iter(r).asList(),u=[];return i.forEach(function(t){o.indexOf(t)<0&&u.push(t)}),t.from(u.sort(n))},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var r=this.arr[0].size(e),n=0,i=r,o=this.arr.length-1;i<t&&n<o;)n++,r=this.arr[n].size(e),i+=r;return n>=this.arr.length?-1:this.arr[n].invert(t-i+r,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof Range)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=Array.from(arguments);return 0===t.length?[]:t.map(function(t,r){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,r){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var n;if(this.isIdentityRange){var i=this.arr[0].to;n=function(t,e){t>=0&&t<i&&e.push(t)}}else{var o=this.iter().asList();n=function(t,e){var r=o.indexOf(t);r>=0&&e.push(r)}}if("function"==typeof e.fromLikeComposite){var u=e;return u.fromLikeComposite(u.groups.map(function(t){var e=[];return t.forEach(function(t){return n(t,e)}),t.fromLike(e)}))}var s=[];return e.forEach(function(t){return n(t,s)}),e.fromLike(s)},t.prototype.filter=function(t,e,r){if(void 0===r&&(r=function(t){return t}),this.isAll)return t.map(r);var n=this.iter(e);if(n.byOne&&n instanceof o.a)return t.slice(n.from,n.to).map(r);for(var i=[];n.hasNext();)i.push(r(t[n.next()]));return i},t.prototype.iter=function(t){if(this.isList)return r.i(o.b)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return o.c.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(r){return r.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=n);var e=this.iter().asList(),r=e.sort(t);return this.fromLike(r)},t.prototype.removeDuplicates=function(e){var r=this.iter().asList();return r=r.sort(n),r=r.filter(function(t,e){return t!==r[e-1]}),t.from(r)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}();e.a=u},220:function(t,e,r){"use strict";function n(t,e){void 0===e&&(e={});var n=JSON.stringify(e),i=t.length+n.length,u=i<2e3?"GET":"POST";return r.i(o.b)(t,e,u)}var i=r(24),o=r(90),u=r(40),s=r(217),a=r(218),c=r(230),p=r(91),f=function(t){function e(e,r,n,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=r,o.names=n,o.internal=i,o.sel=new Map,o.name2idCache=new Map,o.id2nameCache=new Map,o.canBeMappedTo=null,o}return i.a(e,t),e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,r){return t[r]=e.toString()}),{sel:t,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(r){return e.sel.set(r,t.sel[r])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){if(void 0===t&&(t=a.b),this.sel.has(t))return this.sel.get(t);var e=r.i(s.b)();return this.sel.set(t,e),e},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():a.b,n=r.i(s.c)(t[0]),i=r.i(a.c)(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,n,i){void 0===n&&(n=a.a.SET),void 0===i&&(i=a.b);var o=this.selections(i),u=r.i(s.b)();switch(n){case a.a.SET:u=t;break;case a.a.ADD:u=o.union(t);break;case a.a.REMOVE:u=o.without(t)}if(o.eq(u))return o;this.sel.set(i,u);var c=n!==a.a.REMOVE?t:r.i(s.b)(),p=n===a.a.ADD?r.i(s.b)():n===a.a.SET?o:t;return this.fire(e.EVENT_SELECT,i,u,c,p,o),this.fire(e.EVENT_SELECT+"-"+i,u,c,p,o),o},e.prototype.clear=function(t){return void 0===t&&(t=a.b),this.selectImpl(r.i(s.b)(),a.a.SET,t)},e.prototype.fillMapCache=function(t,e){var r=this;t.forEach(function(t,n){var i=String(e[n]);r.name2idCache.set(i,t),r.id2nameCache.set(t,i)})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=r.i(o.a)("/idtype/"+this.id+"/").then(function(t){return t.map(c.c)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var i=r.i(c.c)(e),o=r.i(s.c)(t);return n("/idtype/"+this.id+"/"+i.id,{ids:o.toString(),mode:"first"})},e.prototype.mapNameToFirstName=function(t,e){var i=r.i(c.c)(e);return n("/idtype/"+this.id+"/"+i.id,{q:t,mode:"first"})},e.prototype.mapToName=function(t,e){var i=r.i(c.c)(e),o=r.i(s.c)(t);return n("/idtype/"+this.id+"/"+i.id,{ids:o.toString()})},e.prototype.mapNameToName=function(t,e){var i=r.i(c.c)(e);return n("/idtype/"+this.id+"/"+i.id,{q:t})},e.prototype.mapToFirstID=function(t,e){var i=r.i(c.c)(e),o=r.i(s.c)(t);return n("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var i=r.i(c.c)(e),o=r.i(s.c)(t);return n("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString()})},e.prototype.mapNameToFirstID=function(t,e){var i=r.i(c.c)(e);return n("/idtype/"+this.id+"/"+i.id+"/map",{q:t,mode:"first"})},e.prototype.mapNameToID=function(t,e){var i=r.i(c.c)(e);return n("/idtype/"+this.id+"/"+i.id+"/map",{q:t})},e.prototype.map=function(t){return i.b(this,void 0,void 0,function(){var e,o,u=this;return i.c(this,function(i){switch(i.label){case 0:return t=t.map(function(t){return String(t)}),e=t.filter(function(t){return!u.name2idCache.has(t)}),0===e.length?[2,r.i(p.a)(t.map(function(t){return u.name2idCache.get(t)}))]:[4,n("/idtype/"+this.id+"/map",{ids:e})];case 1:return o=i.sent(),e.forEach(function(t,e){u.name2idCache.set(t,o[e]),u.id2nameCache.set(o[e],t)}),[2,t.map(function(t){return u.name2idCache.get(t)})]}})})},e.prototype.unmap=function(t){return i.b(this,void 0,void 0,function(){var e,o,u,a,c,f=this;return i.c(this,function(i){switch(i.label){case 0:return e=r.i(s.c)(t),o=[],e.dim(0).forEach(function(t){return f.id2nameCache.has(t)?null:o.push(t)}),0===o.length?(u=[],e.dim(0).forEach(function(t){return u.push(f.id2nameCache.get(t))}),[2,r.i(p.a)(u)]):[4,n("/idtype/"+this.id+"/unmap",{ids:r.i(s.a)(o).toString()})];case 1:return a=i.sent(),o.forEach(function(t,e){var r=String(a[e]);f.id2nameCache.set(t,r),f.name2idCache.set(r,t)}),c=[],e.dim(0).forEach(function(t){return c.push(f.id2nameCache.get(t))}),[2,c]}})})},e.prototype.search=function(t,e){return void 0===e&&(e=10),i.b(this,void 0,void 0,function(){var n,u=this;return i.c(this,function(i){switch(i.label){case 0:return[4,r.i(o.a)("/idtype/"+this.id+"/search",{q:t,limit:e})];case 1:return n=i.sent(),n.forEach(function(t){var e=String(t.name);u.id2nameCache.set(t.id,e),u.name2idCache.set(e,t.id)}),[2,n]}})})},e.prototype.searchMapping=function(t,e,n){void 0===n&&(n=10);var i=r.i(c.c)(e);return r.i(o.a)("/idtype/"+this.id+"/"+i.id+"/search",{q:t,limit:n})},e}(u.a);e.a=f,f.EVENT_SELECT="select"},221:function(t,e,r){"use strict";var n=r(230);r.d(e,"d",function(){return n.d}),r.d(e,"a",function(){return n.c}),r.d(e,"h",function(){return n.e});var i=r(231);r.d(e,"f",function(){return i.a});var o=r(218);r.d(e,"c",function(){return o.b}),r.d(e,"g",function(){return o.a});var u=r(220);r.d(e,"b",function(){return u.a});var s=(r(235),r(226),r(237),r(236));r.d(e,"e",function(){return s.a})},222:function(t,e,r){"use strict";function n(){return new h}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?n():1===t.length?t[0]:new l(t)}function o(t,e,r){return new p(t,e,r)}function u(t){return new _(t)}function s(t){return new f(t)}var a=r(24);r.d(e,"a",function(){return p}),e.c=i,e.d=o,e.e=u,e.b=s;var c=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var r=0;this.hasNext();)t.call(e,this.next(),r++)},t.prototype.map=function(t,e){return new d(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),p=function(t){function e(e,r,n){var i=t.call(this)||this;return i.from=e,i.to=r,i.step=n,i.act=i.from,i}return a.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(c),f=function(t){function e(e){var r=t.call(this)||this;return r.arr=e,r.it=new p(0,e.length,1),r}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(c),_=function(t){function e(e){var r=t.call(this)||this;return r.value=e,r.delivered=!1,r}return a.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(c),l=function(t){function e(e){var r=t.call(this)||this;return r.its=e,r.act=e.shift(),r}return a.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(c),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return a.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(c),d=function(t){function e(e,r,n){var i=t.call(this)||this;return i.it=e,i.f=r,i.thisArg=n,i}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(c)},223:function(t,e,r){"use strict";function n(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),o.a.from(e)}var i=r(24),o=r(219),u=function(t){function e(e,r,i){var o=t.call(this,i||n(r))||this;return o.name=e,o.groups=r,o}return i.a(e,t),e.prototype.preMultiply=function(r,n){var i=this.groups.length>1?t.prototype.preMultiply.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(r,n)}),i)},e.prototype.union=function(r,n){var i=this.groups.length>1?t.prototype.union.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.union(r,n)}),i)},e.prototype.intersect=function(r,n){var i=this.groups.length>1?t.prototype.intersect.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(r,n)}),i)},e.prototype.without=function(r,n){var i=this.groups.length>1?t.prototype.without.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.without(r,n)}),i)},e.prototype.clone=function(){var r=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),r)},e.prototype.sort=function(r){var n=this.groups.length>1?t.prototype.sort.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(r)}),n)},e.prototype.toSet=function(r){var n=this.groups.length>1?t.prototype.toSet.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(r)}),n)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e.prototype.fromLikeComposite=function(t){return new e(this.name,t)},e}(o.a);e.a=u},224:function(t,e,r){"use strict";function n(){return new u}function i(){return new u([o.a.none(),o.a.none()])}var o=r(219);e.a=n,e.c=i;var u=function(){function t(t){void 0===t&&(t=[]),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.preMultiply(e.dim(i),r?r[i]:void 0)}),n},t.prototype.union=function(e,r){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.union(e.dim(i),r?r[i]:void 0)}),n},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return i();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.intersect(e.dim(i),r?r[i]:void 0)}),n},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return i();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.without(e.dim(i),r?r[i]:void 0)}),n},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,r){e.dims[r]=t.clone()}),e},t.prototype.swap=function(){return new t(this.dims.map(function(t){return t.clone()}).reverse())},t.prototype.filter=function(t,e){if(this.isAll)return t;var r=this.ndim,n=this,i=function(t){if(t>=r)return function(t){return t};var o=n.dim(t),u=i(t+1),s=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,s,u):t}};return i(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=o.a.all(),this.dims[t])},t.prototype.invert=function(t,e){var r=this;return this.isAll?t:t.map(function(t,n){return r.dim(n).invert(t,e?e[n]:void 0)})},t.prototype.indexRangeOf=function(e,r){return e.isNone||this.isNone?i():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,n){return t.indexRangeOf(e.dim(n),r?r[n]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var r;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);r=arguments[0]}else r=Array.from(arguments);return 0===r.length?[]:r.map(function(t,r){return e.dim(r).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,r){return e.size(t?t[r]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var r=this,n=this.ndim,i=function(o){var u=o.length;if(u<n){r.dims[u].iter(e?e[u]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}();e.b=u},225:function(t,e,r){"use strict";var n=r(24),i=r(219),o=function(t){function e(e,r,n){var i=t.call(this,n)||this;return i.name=e,i.color=r,i}return n.a(e,t),e.prototype.preMultiply=function(r,n){var i=t.prototype.preMultiply.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.union=function(r,n){var i=t.prototype.union.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.intersect=function(r,n){var i=t.prototype.intersect.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.without=function(r,n){var i=t.prototype.without.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(r){return new e(this.name,this.color,t.prototype.toSet.call(this,r))},e.prototype.fromLike=function(r){return new e(this.name,this.color,t.prototype.fromLike.call(this,r))},e}(i.a);e.a=o},226:function(t,e,r){"use strict";function n(t,e,r){if(0===e.ndim)return!0;for(var n=function(r){var n=t.dim(r),i=e.dim(r);return i.isAll||n.isAll?{value:!0}:!n.isUnbound&&n.asList().every(function(t){return!i.contains(t)})?{value:!1}:void 0},i=0;i<Math.min(t.ndim,r);++i){var o=n(i);if("object"==typeof o)return o.value}return!1}function i(t,e,r){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return n(t,e,r)})||i.push(t)}),i}var o=r(24),u=r(40),s=r(217),a=r(218),c=r(220),p=function(t){function e(r,n){void 0===n&&(n=!1);var i=t.call(this)||this;return i.elems=r,i.internal=n,i.sel=new Map,i.isOn=!1,i.selectionListener=function(t,r,n,o,u){i.fire(e.EVENT_SELECT_DIM+","+e.EVENT_SELECT_PRODUCT,i.elems.indexOf(t.currentTarget),r,n,o,u),i.fire(e.EVENT_SELECT_DIM+"-"+r+","+e.EVENT_SELECT_PRODUCT+"-"+r,i.elems.indexOf(t.currentTarget),n,o,u)},i}return o.a(e,t),e.prototype.on=function(e,r){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,r){return t[r]=e.map(function(t){return t.toString()})}),{sel:t}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(r){return e.sel.set(r,t.sel[r].map(s.c))}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){return void 0===t&&(t=a.b),this.sel.has(t)?this.sel.get(t).slice():(this.sel.set(t,[]),[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=a.b);var n=this.selections(t),i=this.toPerDim(n);return this.elems.forEach(function(o,u){var a=o.selections(t),c=a.without(i[u]);c.isNone||n.push(r.i(s.a)(e.elems.map(function(t){return o===t?c.dim(0):s.d.all()})))}),n},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():a.b,n=t[0].map(s.c),i=r.i(a.c)(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,r,n){void 0===r&&(r=a.a.SET),void 0===n&&(n=a.b);var o=t.map(s.c),u=this.selections(n),p=[];switch(r){case a.a.SET:p=o;break;case a.a.ADD:p=u.concat(o);break;case a.a.REMOVE:p=i(u,o,this.elems.length)}this.sel.set(n,p);var f=this.toPerDim(p);this.disable(),this.elems.forEach(function(t,e){return t.select(n,f[e])}),this.enable();var _=r!==a.a.REMOVE?o:[],l=r===a.a.ADD?[]:r===a.a.SET?u:o;return this.fire(c.a.EVENT_SELECT,n,p,_,l,u),this.fire(e.EVENT_SELECT_PRODUCT,-1,n,p,_,l,u),this.fire(c.a.EVENT_SELECT+"-"+n,p,_,l,u),this.fire(e.EVENT_SELECT_PRODUCT+"-"+n,-1,p,_,l,u),u},e.prototype.toPerDim=function(t){return this.elems.map(function(e,n){if(0===t.length)return r.i(s.b)();var i=t.map(function(t){return t.dim(n)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return r.i(s.a)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=a.b),this.selectImpl([],a.a.SET,t)},e}(u.a);e.a=p,p.EVENT_SELECT_DIM="selectDim",p.EVENT_SELECT_PRODUCT="selectProduct"},227:function(t,e,r){"use strict";function n(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].map(function(t){return[t]}),r=1;r<t.length;++r)t[r].forEach(function(t,r){return e[r].push(t)});return e}function i(t,e){if(Array.isArray(t)){var r=t;if(r.indexOf(e)>=0)return r.map(function(t){return t===e?NaN:t})}return t===e?NaN:t}function o(t,e){return e.type===b&&"missing"in e?i(t,e.missing):e.type===b||e.type===m?i(t,null):t}function u(t,e,n){void 0===n&&(n={});var i=r.i(f.b)({skipEmptyCategories:!0,colors:["gray"],labels:null,name:"Partitioning"},n),o=e.map(function(t,e){return{name:i.labels?i.labels[e]:t.toString(),color:i.colors[Math.min(e,i.colors.length-1)],indices:[]}});t.forEach(function(t,r){var n=e.indexOf(t);n>=0&&o[n].indices.push(r)}),i.skipEmptyCategories&&(o=o.filter(function(t){return t.indices.length>0}));var u=o.map(function(t){return new h.i(t.name,t.color,h.d.from(t.indices))});return r.i(h.j)(i.name,u)}function s(t){return t-parseFloat(t)+1>=0}function a(t){if(0===t.length)return{type:"string"};var e=t[0];if("number"==typeof e||s(e))return{type:m,range:r.i(l.a)(t.map(parseFloat))};var n=new Set(t);return n.size<.2*t.length||n.size<8?{type:"categorical",categories:Array.from(n.values())}:{type:"string"}}function c(t){void 0===t&&(t="localData");var e=r.i(f.e)(t);return{type:"default",id:e,name:e,fqname:e,description:"",creator:r.i(d.a)(),ts:Date.now()}}var p=r(24),f=r(12),_=r(221),l=r(232),h=r(217),d=r(92);r.d(e,"d",function(){return y}),r.d(e,"g",function(){return m}),r.d(e,"f",function(){return b}),r.d(e,"c",function(){return g}),r.d(e,"e",function(){return v}),e.j=n,e.i=o,e.h=u,e.a=a,e.b=c;var y="categorical",m="real",b="int",g=function(t){function e(e){var r=t.call(this)||this;return r.desc=e,r}return p.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(h.e)()),Promise.resolve(r.i(h.b)())},e.prototype.idView=function(t){return Promise.resolve(this)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e.prototype.toString=function(){return this.persist()},e}(_.f),v=function(t){function e(e){return t.call(this,e)||this}return p.a(e,t),e}(g)},228:function(t,e,r){"use strict";var n=r(229),i=r(222),o=r(233),u=function(){function t(t,e,r){if(void 0===e&&(e=-1),void 0===r&&(r=1),this.from=t,this.to=e,this.step=r,0===r)throw new Error("invalid step size: "+r)}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new o.a(t)},t.range=function(e,r,n){return void 0===r&&(r=-1),void 0===n&&(n=1),e+n===r?t.single(e):new t(e,r,n)},t.prototype.size=function(t){var e=r.i(n.a)(this.to,t),i=r.i(n.a)(this.from,t);if(1===this.step)return Math.max(e-i,0);if(-1===this.step)return-1===this.to?Math.max(i- -1,0):Math.max(i-e,0);var o=this.step>0?e-i+1:i-e+1,u=Math.abs(this.step);return o<=0?0:Math.floor(o/u)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){if(this.step>0){var e=this.from-1,r=this.to-1;return new t(r,e,-this.step)}var e=this.from-1,r=this.to-1;return new t(r,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:r.i(n.a)(this.from,e)+t*this.step},t.prototype.iter=function(t){return this.step<0&&-1===this.to?r.i(i.d)(r.i(n.a)(this.from,t),-1,this.step):r.i(i.d)(r.i(n.a)(this.from,t),r.i(n.a)(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){if(this.isAll)return!0;var i=r.i(n.a)(this.from,e),o=r.i(n.a)(this.to,e);return-1===this.step?-1===this.to?t<=i&&t>=0:t<=i&&t>o:1===this.step?t>=i&&t<o:this.iter(e).asList().indexOf(t)>=0},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var r=function(t,e){if(void 0===e&&(e=NaN),""===(t=t.trim())&&!isNaN(e))return e;var r=parseInt(t,10);if(isNaN(r))throw Error('parse error: "'+t+'" is not a valid integer');return r},n=e.split(":");switch(n.length){case 1:return t.single(r(n[0]));case 2:return new t(r(n[0],0),r(n[1],-1));case 3:return new t(r(n[0],0),r(n[1],-1),r(n[2],1));default:throw new Error('parse error: "'+e+'" is not a valid range specifier')}},t}();e.a=u},229:function(t,e,r){"use strict";function n(t,e){return t<0?e+1+t:t}e.a=n},230:function(t,e,r){"use strict";function n(t){t.forEach(function(t){var e=y.get(t.id),n=!1;e?e instanceof h.a&&(e.name=t.name,e.names=t.names):(e=new h.a(t.id,t.name,t.names),n=!0),y.set(t.id,e),n&&r.i(l.b)(b,e)})}function i(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function o(t){if(t instanceof h.a)return t;var e=t;return c(e,new h.a(e,e,i(e)))}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new d.a(t);return c(r.id,r)}function s(){return Array.from(y.values())}function a(){return f.b(this,void 0,void 0,function(){var t;return f.c(this,function(e){switch(e.label){case 0:return m?[2,Promise.resolve(s())]:[4,r.i(_.a)("/idtype/",{},[])];case 1:return t=e.sent(),m=!0,n(t),[2,s()]}})})}function c(t,e){return y.has(t)?y.get(t):(y.set(t,e),r.i(l.b)("register.idtype",e),e)}function p(t){return t.internal||t.id.startsWith("_")}var f=r(24),_=r(90),l=r(40),h=(r(218),r(220)),d=r(226);e.c=o,e.e=u,e.d=s,e.a=a,e.b=p;var y=new Map,m=!1,b="register.idtype"},231:function(t,e,r){"use strict";var n=r(24),i=r(40),o=r(217),u=r(218),s=r(220),a=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.numSelectListeners=0,i.selectionListeners=[],i.singleSelectionListener=function(t,o,s,a,c){return n.b(i,void 0,void 0,function(){var t;return n.c(this,function(n){switch(n.label){case 0:return[4,this.ids()];case 1:return t=n.sent(),(s=t.indexOf(s),a=t.indexOf(a),c=t.indexOf(c),s.isNone&&a.isNone&&c.isNone)?[2]:(r.i(u.d)(s,t.ndim),r.i(u.d)(a,t.ndim),r.i(u.d)(c,t.ndim),this.fire(e.EVENT_SELECT,o,s,a,c),this.fire(e.EVENT_SELECT+"-"+o,s,a,c),[2])}})})},i.selectionCache=[],i.accumulateEvents=-1,i}return n.a(e,t),e.prototype.fromIdRange=function(t){return void 0===t&&(t=r.i(o.e)()),n.b(this,void 0,void 0,function(){return n.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return[2,e.sent().indexOf(r.i(o.c)(t))]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,r){var n=this;return function(t,i,o,u,s){n.selectionCache[e]={act:o,added:u,removed:s},(n.accumulateEvents<0||++n.accumulateEvents===r)&&n.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var n=this,i=this.idtypes,u=i.map(function(e,i){var u=n.selectionCache[i];return u||{act:e.selections(t),added:r.i(o.b)(),removed:r.i(o.b)()}}),s=r.i(o.f)(u.map(function(t){return t.act})),a=r.i(o.f)(u.map(function(t){return t.added})),c=r.i(o.f)(u.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.singleSelectionListener(null,t,s,a,c)},e.prototype.on=function(r,n){var i=this;if("string"==typeof r&&(r===e.EVENT_SELECT||"select-"===r.slice(0,"select-".length))&&1===++this.numSelectListeners){var o=this.idtypes;1===o.length?(this.selectionListeners.push(this.singleSelectionListener),o[0].on(e.EVENT_SELECT,this.singleSelectionListener)):o.forEach(function(t,r){var n=i.selectionListener(t,r,o.length);i.selectionListeners.push(n),t.on(e.EVENT_SELECT,n)})}return t.prototype.on.call(this,r,n)},e.prototype.off=function(r,n){var i=this;return"string"!=typeof r||r!==e.EVENT_SELECT&&"select-"!==r.slice(0,"select-".length)||0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,r){return t.off(e.EVENT_SELECT,i.selectionListeners[r])}),this.selectionListeners=[]),t.prototype.off.call(this,r,n)},e.prototype.selections=function(t){return void 0===t&&(t=u.b),n.b(this,void 0,void 0,function(){var e,i;return n.c(this,function(n){switch(n.label){case 0:return[4,this.ids()];case 1:return e=n.sent(),i=r.i(o.f)(this.idtypes.map(function(e){return e.selections(t)})),[2,e.indexRangeOf(i)]}})})},e.prototype.select=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t.shift():u.b,i=r.i(o.c)(t[0]),s=r.i(u.c)(t[1]);return this.selectImpl(i,s,n,e)},e.prototype.selectImpl=function(t,e,i,s){return void 0===e&&(e=u.a.SET),void 0===i&&(i=u.b),void 0===s&&(s=-1),n.b(this,void 0,void 0,function(){var u,a,c;return n.c(this,function(n){switch(n.label){case 0:return u=this.idtypes,[4,this.ids()];case 1:if(a=n.sent(),-1===s){for(t=a.preMultiply(t),this.accumulateEvents=0,c=r.i(o.f)(t.split().map(function(t,r){return u[r].select(i,t,e)})),this.accumulateEvents>0&&this.fillAndSend(i,-1);c.ndim<u.length;)c.dim(c.ndim);return[2,a.indexRangeOf(c)]}return a=a.split()[s],t=a.preMultiply(t),u[s].select(i,t,e),[2,a.indexRangeOf(t)]}})})},e.prototype.clear=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t[0]:u.b;return this.selectImpl(r.i(o.b)(),u.a.SET,n,e)},e}(i.a);a.EVENT_SELECT=s.a.EVENT_SELECT,e.a=a},232:function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new l;return t.forEach(function(t){return t.forEach(r.push,r)}),r}function i(t,e){var r=t.length;if(0===r)return NaN;if(r<2||e<=0)return t[0];if(e>=1)return t[r-1];var n=e*(r-1),i=Math.floor(n),o=t[i];return o+(t[i+1]-o)*(n-i)}function o(t){t=t.slice().sort(function(t,e){return t-e});var e=new h(i(t,.5),i(t,.25),i(t,.75));return t.forEach(function(t){return e.push(t)}),e}function u(t,e,r,n,i){var o=new y(n,i);return o.pushAll(t,e,r),o}function s(t,e,r,n,i,o){var u=new m(n,i,o);return u.pushAll(t,e,r),u}function a(t){return new b(t)}function c(t,e){return new y(t.length,e,t)}function p(t){var e=NaN,r=NaN;return t.forEach(function(t){isNaN(t)||((isNaN(e)||e>t)&&(e=t),(isNaN(r)||e<t)&&(r=t))}),[e,r]}var f=r(24),_=r(217);e.c=n,e.d=o,e.f=u,e.e=s,e.b=a,e.g=c,e.a=p;var l=function(){function t(){this.min=NaN,this.max=NaN,this.sum=0,this.mean=0,this._var=0,this.n=0,this.nans=0,this.moment2=NaN,this.moment3=NaN,this.moment4=NaN}return Object.defineProperty(t.prototype,"var",{get:function(){return this.n>1?this._var/(this.n-1):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sd",{get:function(){return Math.sqrt(this.var)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kurtosis",{get:function(){return 0===this.n?0:this.n*this.moment4/(this.moment2*this.moment2)-3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewness",{get:function(){return 0===this.n?0:Math.sqrt(this.n)*this.moment3/Math.pow(this.moment2,1.5)},enumerable:!0,configurable:!0}),t.prototype.push=function(t){if("number"!=typeof t&&(t=Number.NaN),isNaN(t))return void this.nans++;if(this.n++,this.sum+=t,(t<this.min||isNaN(this.min))&&(this.min=t),(this.max<t||isNaN(this.max))&&(this.max=t),1===this.n)this.mean=t,this._var=0,this.moment2=this.moment3=this.moment4=0;else{var e=this.mean;this.mean=e+(t-e)/this.n,this._var=this._var+(t-e)*(t-this.mean);var r=t-e,n=r/this.n,i=n*n,o=r*n*(this.n-1);this.moment4+=o*i*(this.n*this.n-3*this.n+3)+6*i*this.moment2-4*n*this.moment3,this.moment3+=o*n*(this.n-2)-3*n*this.moment2,this.moment2+=o}},t}(),h=function(t){function e(e,r,n){var i=t.call(this)||this;return i.median=e,i.q1=r,i.q3=n,i}return f.a(e,t),e}(l),d=function(){function t(t,e){this._missing=0,this._missingRange=r.i(_.b)(),this._bins=[];for(var n=0;n<t;++n)this._bins.push(e&&e.length>n?e[n]:0)}return Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max(Math.max.apply(Math,this._bins),this._missing)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return Math.max.apply(Math,this._bins)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.validCount+this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this._bins.reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._bins.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return-1},t.prototype.frequency=function(t){return this._bins[t]},t.prototype.range=function(t){return this._ranges?this._ranges[t]:r.i(_.b)()},Object.defineProperty(t.prototype,"missing",{get:function(){return this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return this._missingRange},enumerable:!0,configurable:!0}),t.prototype.pushAll=function(t,e,n){for(var i=this,o=[],u=[],s=this.bins-1;s>=0;--s)o.push([]);if(e){var a=e.iter(n);t.forEach(function(t){var e=a.next(),r=i.binOf(t);r<0?(i._missing++,u.push(e)):(i._bins[r]++,o[r].push(e))}),this._ranges=o.map(function(t){return r.i(_.a)(t.sort().filter(function(t,e,r){return t!==r[e-1]}))}),this._missingRange=r.i(_.a)(u.sort().filter(function(t,e,r){return t!==r[e-1]}))}else t.forEach(function(t){var e=i.binOf(t);e<0?i._missing++:i._bins[e]++}),this._ranges=null,this._missingRange=null},t.prototype.forEach=function(t,e){return this._bins.forEach(t,e)},t}(),y=function(t){function e(e,r,n){var i=t.call(this,e,n)||this;return i.valueRange=r,i}return f.a(e,t),e.prototype.binOf=function(t){return"number"==typeof t?this.binOfImpl(t):-1},e.prototype.binOfImpl=function(t){if(isNaN(t))return-1;var e=(t-this.valueRange[0])/(this.valueRange[1]-this.valueRange[0]),r=Math.round(e*(this.bins-1));return r<0&&(r=0),r>=this.bins&&(r=this.bins-1),isNaN(r)?-1:r},e}(d),m=function(t){function e(e,r,n){var i=t.call(this,e.length)||this;return i.values=e,i.categories=r,i.colors=n,i}return f.a(e,t),e.prototype.binOf=function(t){return this.values.indexOf(t)},e}(d),b=function(){function t(t){this._range=t}return Object.defineProperty(t.prototype,"categories",{get:function(){return this._range.groups.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this._range.groups.map(function(t){return t.color})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max.apply(Math,this._range.groups.map(function(t){return t.length}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return this.largestFrequency},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._range.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._range.groups.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return this._range.groups.findIndex(function(e){return e.name===t})},t.prototype.frequency=function(t){return this._range.groups[t].length},t.prototype.range=function(t){return r.i(_.a)(this._range.groups[t])},Object.defineProperty(t.prototype,"missing",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return r.i(_.b)()},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this._range.groups.forEach(function(r,n){return t.call(e,r.length,n)})},t}()},233:function(t,e,r){"use strict";var n=r(229),i=r(222),o=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return r.i(n.a)(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return r.i(n.a)(this.from,e)+t},t.prototype.iter=function(t){return r.i(i.e)(r.i(n.a)(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}();e.a=o},234:function(t,e,r){"use strict";function n(t){var e,r,n=[],a=0;for(t=t.trim();a<t.length;)switch(e=t.charAt(a)){case'"':r=i(t,a),a=r.act+1,n.push(r.dim);break;case",":a++,n.push(s.a.all());break;default:e.match(/\s/)?a++:(r=o(t,a),a=r.act+1,n.push(r.dim))}return","===t.charAt(t.length-1)&&n.push(s.a.all()),new u.b(n)}function i(t,e){e+=1;var r,n=t.indexOf('"',e),u=t.slice(e,n);switch(e=n+1,t.charAt(e)){case'"':return n=t.indexOf('"',e+1),r=o(t,n+1),{dim:new a.a(u,t.slice(e+1,n),r.dim),act:r.act};case"{":for(var c=[];"}"!==t.charAt(e);)r=i(t,e+1),c.push(r.dim),e=r.act;return{dim:new p.a(u,c),act:r.act+1};default:return{dim:s.a.all(),act:e}}}function o(t,e){var r,n;switch(t.charAt(e)){case",":case"}":r=e,n=s.a.all();break;case"(":n=new s.a,r=t.indexOf(")",e),r>e+1&&n.push.apply(n,t.slice(e+1,r).split(",").map(c.a.parse)),r+=1;break;default:r=t.indexOf("}",e);var i=t.indexOf(",",e);r>=0&&i>=0?r=Math.min(r,i):r<0&&(r=i),r<0&&(r=t.length),n=new s.a([c.a.parse(t.slice(e,r))])}return{act:r,dim:n}}var u=r(224),s=r(219),a=r(225),c=r(228),p=r(223);e.a=n},235:function(t,e,r){"use strict";var n=r(24),i=r(217),o=r(218),u=r(231),s=r(226),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,n,i){var u=e.producttype.productSelections(i);if(0===u.length)return e.fire(s.a.EVENT_SELECT_PRODUCT,i,[]),void e.fire(s.a.EVENT_SELECT_PRODUCT+"-"+i,[]);e.ids().then(function(t){var n=u.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==n.length&&(n.forEach(function(e){return r.i(o.d)(e,t.ndim)}),e.fire(s.a.EVENT_SELECT_PRODUCT,i,n),e.fire(s.a.EVENT_SELECT_PRODUCT+"-"+i,n))})},e}return n.a(e,t),e.prototype.on=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,r)},e.prototype.off=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,r)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=o.b),this.ids().then(function(n){var i=e.producttype.productSelections(t),u=i.map(function(t){return n.indexRangeOf(t)}).filter(function(t){return!t.isNone});return u.forEach(function(t){return r.i(o.d)(t,n.ndim)}),u})},e.prototype.selectProduct=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():o.b,n=t[0].map(i.c),u=r.i(o.c)(t[1]);return this.selectProductImpl(n,u,e)},e.prototype.selectProductImpl=function(t,e,r){var n=this;return void 0===e&&(e=o.a.SET),void 0===r&&(r=o.b),this.ids().then(function(i){return t=t.map(function(t){return i.preMultiply(t)}),n.producttype.select(r,t,e)})},e.prototype.clear=function(){var t=Array.from(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:o.b;return this.selectProductImpl([],o.a.SET,e||o.b)},e}(u.a);e.a=a},236:function(t,e,r){"use strict";function n(){var t=new u;return t.map.bind(t)}var i=r(12),o=r(217);e.a=n;var u=function(){function t(){this.pool=new i.i,this.lookup=new Map}return t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,r=Object.keys(this.lookup);return t.map(function(t){for(var n in r)if(e.lookup.get(n)===t)return n;return null})},t.prototype.mapOne=function(t){return this.lookup.has(t)?this.lookup.get(t):(this.lookup.set(t,this.pool.checkOut()),this.lookup.get(t))},t.prototype.map=function(t){var e=this,r=t.map(function(t){return e.mapOne(t)});return o.a.apply(void 0,r)},t}()},237:function(t,e,r){"use strict";var n=r(24),i=r(12),o=r(218),u=r(220);!function(t){function e(e,r){var n=t.call(this,e,r,r+"s",!0)||this;return n.instances=[],n.pool=new i.i,n}n.a(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var r=this;this.instances.forEach(function(n,i){return r.pool.isCheckedOut(i)?t.call(e,n):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,r){return t.pool.isCheckedOut(r)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,r=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(r=this.instances[t],delete this.instances[t],this.fire("remove",t,r)),this.selectionTypes().forEach(function(r){e.select(r,[t],o.a.REMOVE)}),this.pool.checkIn(t),r},e.prototype.selectedObjects=function(t){return void 0===t&&(t=o.b),this.selections(t).filter(this.instances)}}(u.a)},238:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(217),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_3__idtype__=__webpack_require__(221),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(227),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(232),__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__=__webpack_require__(243),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__=__webpack_require__(242),AVector=function(_super){function AVector(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(AVector,_super),Object.defineProperty(AVector.prototype,"dim",{get:function(){return[this.length]},enumerable:!0,configurable:!0}),Object.defineProperty(AVector.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),AVector.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),new VectorView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t))},AVector.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return e=r.sent(),[2,this.view(e.indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t)))]}})})},AVector.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.c,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},AVector.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.f&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.g?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.d,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},Object.defineProperty(AVector.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.k)(0,this.length)},enumerable:!0,configurable:!0}),AVector.prototype.groups=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e,r,n,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(o){switch(o.label){case 0:return t=this.root.valuetype,t.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.d?[3,2]:(e=t,[4,this.data()]);case 1:return r=o.sent(),n={name:this.root.desc.id},"string"!=typeof e.categories[0]&&(i=e.categories,i[0].color&&(n.colors=i.map(function(t){return t.color})),i[0].label&&(n.labels=i.map(function(t){return t.label}))),[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__datatype__.h)(r,e.categories.map(function(t){return"string"==typeof t?t:t.name}),n)];case 2:return[2,Promise.resolve(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.j)(this.root.desc.id,[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(this.indices.dim(0))]))]}})})},AVector.prototype.stratification=function(){return this.asStratification()},AVector.prototype.asStratification=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return t=__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a.bind,e=[void 0,this.root],[4,this.groups()];case 1:return[2,new(t.apply(__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a,e.concat([r.sent()])))]}})})},AVector.prototype.hist=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,n,i,o;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(u){switch(u.label){case 0:return r=this.root.valuetype,[4,this.data(e)];case 1:switch(n=u.sent(),r.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.d:return i=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.e)(n,this.indices.dim(0),n.length,i.categories.map(function(t){return"string"==typeof t?t:t.name}),i.categories.map(function(t){return"string"==typeof t?t:t.label||t.name}),i.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.g:case __WEBPACK_IMPORTED_MODULE_4__datatype__.f:return o=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.f)(n,this.indices.dim(0),n.length,t||Math.round(Math.sqrt(this.length)),o.range)];default:return[2,null]}return[2]}})})},AVector.prototype.every=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().every(t,e)]}})})},AVector.prototype.some=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().some(t,e)]}})})},AVector.prototype.forEach=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return r.sent().forEach(t,e),[2]}})})},AVector.prototype.reduce=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function n(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduce(n,e)]}})})},AVector.prototype.reduceRight=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function n(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduceRight(n,e)]}})})},AVector.prototype.reduceAtom=function(t,e,r,n){var i=this;return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__.a(i,t,e,r,n)},AVector.prototype.restore=function(persisted){var r=this;return persisted&&persisted.f?this.reduceAtom(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__idtype__.a)(persisted.idtype):void 0):(persisted&&persisted.range&&(r=r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(persisted.range))),r)},AVector}(__WEBPACK_IMPORTED_MODULE_3__idtype__.f);__webpack_exports__.a=AVector;var VectorView=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.size=function(){return this.range.size(this.root.dim)[0]},e.prototype.at=function(t){var e=this.range.invert([t],this.root.dim);return this.root.at(e[0])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.names=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.names(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.sort=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return r=i.sent(),n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.m)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)(n))]}})})},e.prototype.filter=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return r=i.sent(),n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.n)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)(n))]}})})},e}(AVector)},239:function(t,e,r){"use strict";var n=r(24),i=r(217),o=r(221),u=r(232),s=function(t){function e(e,r,n){var i=t.call(this)||this;return i.root=e,i.groupIndex=r,i.groupDesc=n,i}return n.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return[this.groupDesc]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return 0===t?this:null},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(i.e)()),n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return t=u.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.all([this.root.asVector(),this.rangeGroup()]).then(function(t){return t[0].view(r.i(i.a)(t[1]))})},e.prototype.origin=function(){return this.root.origin()},e.prototype.range=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.rangeGroup()];case 1:return t=e.sent(),[2,new i.g(t.name,[t])]}})})},e.prototype.idRange=function(){return n.b(this,void 0,void 0,function(){var t,e;return n.c(this,function(r){switch(r.label){case 0:return[4,this.root.idRange()];case 1:return t=r.sent(),e=t.groups[this.groupIndex],[2,new i.g(e.name,[e])]}})})},e.prototype.rangeGroup=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.root.range()];case 1:return t=e.sent(),[2,t.groups[this.groupIndex]]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(i.e)()),n.b(this,void 0,void 0,function(){var e,o;return n.c(this,function(n){switch(n.label){case 0:return[4,this.rangeGroup()];case 1:return e=n.sent(),o=r.i(i.a)(e).preMultiply(r.i(i.c)(t)),[2,this.root.names(o)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.e)()),n.b(this,void 0,void 0,function(){var e,o;return n.c(this,function(n){switch(n.label){case 0:return[4,this.rangeGroup()];case 1:return e=n.sent(),o=r.i(i.a)(e).preMultiply(r.i(i.c)(t)),[2,this.root.ids(o)]}})})},e.prototype.idView=function(t){return void 0===t&&(t=r.i(i.e)()),Promise.reject("not implemented")},e.prototype.toString=function(){return this.persist()},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return[this.length]},Object.defineProperty(e.prototype,"length",{get:function(){return this.groupDesc.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),group:this.groupIndex}},e.prototype.restore=function(t){return this},e}(o.f);e.a=s},242:function(t,e,r){"use strict";var n=r(24),i=r(217),o=r(221),u=function(t){function e(e,r,n,i,o){void 0===n&&(n=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.idtype);var u=t.call(this)||this;return u.v=e,u.f=r,u.thisArgument=n,u.valuetype=i,u._idtype=o,u.cache=null,u.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"atom",id:e.desc.id+"-p",idtype:e.idtype,value:u.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},u}return n.a(e,t),e.prototype.load=function(){var t=this;return null===this.cache&&(this.cache=Promise.all([this.v.data(),this.v.ids(),this.v.names()]).then(function(e){return t.f.apply(t.thisArgument,e)})),this.cache},e.prototype.id=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,r.i(i.a)(t.id)]}})})},e.prototype.name=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.name]}})})},e.prototype.data=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.value]}})})},Object.defineProperty(e.prototype,"dim",{get:function(){return[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.e)()),t=r.i(i.c)(t),t.isNone?Promise.resolve(r.i(i.b)()):this.id()},e.prototype.idView=function(t){return Promise.resolve(this)},e.prototype.persist=function(){return{root:this.v.persist(),f:this.f.toString(),valuetype:this.valuetype===this.v.valuetype?void 0:this.valuetype,idtype:this.idtype===this.v.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){return this},e}(o.f);e.a=u},243:function(t,e,r){"use strict";var n=r(24),i=r(217),o=r(227),u=r(232),s=r(239),a=function(t){function e(e,r){var n=t.call(this,{id:e.desc.id+"-s",name:e.desc.name,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts,fqname:e.desc.fqname,type:"stratification",idtype:e.idtype.id,size:e.length,ngroups:r.groups.length,groups:r.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}})})||this;return n.v=e,n.r=r,n}return n.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.v.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new s.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(i.e)()),n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return t=u.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.resolve(this.v)},e.prototype.origin=function(){return this.asVector()},e.prototype.range=function(){return Promise.resolve(this.r)},e.prototype.idRange=function(){return n.b(this,void 0,void 0,function(){var t;return n.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return t=e.sent(),[2,t.dim(0).preMultiply(this.r,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(i.e)()),this.v.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(i.e)()),this.v.ids(t)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.v.persist(),asstrat:!0}},e}(o.c);e.a=a},268:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(217),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(221),__WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__=__webpack_require__(270),ATable=function(_super){function ATable(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(ATable,_super),Object.defineProperty(ATable.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),ATable.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),new TableView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t))},ATable.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return e=this.view,[4,this.ids()];case 1:return[2,e.apply(this,[r.sent().indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t))])]}})})},ATable.prototype.reduce=function(t,e,r,n){return new __WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__.a(this.root,t,e,r,n)},ATable.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.a)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(persisted.range)):this},ATable}(__WEBPACK_IMPORTED_MODULE_2__idtype__.f);__webpack_exports__.a=ATable;var TableView=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n.range=r,n.vectors=n.root.cols(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)(r.dim(1))).map(function(t){return t.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)(r.dim(0)))}),n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t.range))),e},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this.root.dim);return this.root.at(r[0],r[1])},e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t).filter(this.vectors,[this.ncol])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.colData=function(t,e){return this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)());var r=this.range.dim(0).preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(e).dim(0),this.root.dim[0]);return this.root.dataOfColumn(t,new __WEBPACK_IMPORTED_MODULE_1__range__.l([r]))},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.objects(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)()),this.rowIds(t)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.e)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.c)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.queryView=function(t,e){throw new Error("not implemented")},e}(ATable)},269:function(t,e,r){"use strict";function n(){return r.i(i.b)(r.i(o.b)(),{type:"table",idtype:"_rows",columns:[],size:[0,0]})}var i=r(12),o=r(227);e.a=n},270:function(t,e,r){"use strict";var n=r(24),i=r(12),o=r(217),u=r(238),s=function(t){function e(e,n,o,u,s){void 0===o&&(o=e),void 0===u&&(u=null),void 0===s&&(s=e.idtype);var a=t.call(this,null)||this;return a.table=e,a.f=n,a.thisArgument=o,a.valuetype=u,a._idtype=s,a.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",description:n.toString(),type:"vector",id:r.i(i.c)(e.desc.id+"-p"+n.toString()),idtype:e.desc.idtype,size:e.nrow,value:u,creator:e.desc.creator,ts:Date.now()},a.root=a,a}return n.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),f:this.f.toString(),valuetype:this.valuetype?this.valuetype:void 0,idtype:this.idtype===this.table.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.c)(t.range))),e},e.prototype.size=function(){return this.table.nrow},e.prototype.names=function(t){return this.table.rows(t)},e.prototype.ids=function(t){return this.table.rowIds(t)},e.prototype.at=function(t){return n.b(this,void 0,void 0,function(){var e,i,u;return n.c(this,function(n){switch(n.label){case 0:return i=(e=this.f).call,u=[this.thisArgument],[4,this.table.data(r.i(o.a)(t))];case 1:return[2,i.apply(e,u.concat([n.sent()[0]]))]}})})},e.prototype.data=function(t){return n.b(this,void 0,void 0,function(){return n.c(this,function(e){switch(e.label){case 0:return[4,this.table.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return n.b(this,void 0,void 0,function(){var u,s;return n.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return u=n.sent(),s=r.i(i.m)(u,t,e),[2,this.view(r.i(o.a)(s))]}})})},e.prototype.filter=function(t,e){return n.b(this,void 0,void 0,function(){var u,s;return n.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return u=n.sent(),s=r.i(i.n)(u,t,e),[2,this.view(r.i(o.a)(s))]}})})},e}(u.a);e.a=s},271:function(t,e,r){"use strict";var n=r(24),i=r(12),o=r(217),u=r(238),s=function(t){function e(e,r,n){var i=t.call(this,null)||this;return i.table=e,i.index=r,i.column=n.column,i.root=i,i.desc={type:"vector",id:e.desc.id+"_"+n.name,name:n.name,description:n.description||"",fqname:e.desc.fqname+"/"+n.name,idtype:e.idtype.id,size:e.nrow,value:n.value,creator:e.desc.creator,ts:e.desc.ts},i}return n.a(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.table.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),col:this.index}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(o.c)(t.range))),e},e.prototype.at=function(t){return this.table.at(t,this.index)},e.prototype.data=function(t){return void 0===t&&(t=r.i(o.e)()),this.table.colData(this.column,t)},e.prototype.names=function(t){return void 0===t&&(t=r.i(o.e)()),this.table.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(o.e)()),this.table.rowIds(t)},e.prototype.size=function(){return this.table.nrow},e.prototype.sort=function(t,e){return n.b(this,void 0,void 0,function(){var u,s;return n.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return u=n.sent(),s=r.i(i.m)(u,t,e),[2,this.view(r.i(o.a)(s))]}})})},e.prototype.filter=function(t,e){return n.b(this,void 0,void 0,function(){var u,s;return n.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return u=n.sent(),s=r.i(i.n)(u,t,e),[2,this.view(r.i(o.a)(s))]}})})},e}(u.a);e.a=s},272:function(t,e,r){"use strict";function n(t,e,r){if(e.isAll)return t;if(t=e.dim(0).filter(t,r.size[0]),e.ndim>1&&!e.dim(1).isAll){var n=e.dim(1).filter(r.columns,r.columns.length),i=n.map(function(t){return t.column||t.name});return t.map(function(t){var e={};return i.forEach(function(r){return e[r]=t[r]}),e})}return t}function i(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},col:function(e,r,n){return t(e).then(function(t){return n.filter(t.objs.map(function(t){return t[r]}),e.size)})},objs:function(e,r){return t(e).then(function(t){return n(t.objs,r,e)})},data:function(e,r){return t(e).then(function(t){return r.filter(c(t.objs,e.columns),e.size)})},view:function(t,e,r){throw new Error("not implemented")}}}function o(t,e){var n=void 0;return function(i){return n||(n=r.i(f.a)("/dataset/table/"+i.id+"/view/"+t,e).then(function(t){return t.rowIds=r.i(_.c)(t.rowIds),t.objs=s(t.data,i),t})),n}}function u(t,e){return!e.value||e.value.type!==l.f&&e.value.type!==l.g?t:r.i(l.i)(t,e.value)}function s(t,e){var n=e.columns.filter(function(t){return t.value&&(t.value.type===l.f||t.value.type===l.g)});return n.length>0&&t.forEach(function(t){n.forEach(function(e){return t[e.name]=r.i(l.i)(t[e.name],e.value)})}),t}function a(){function t(t){null!==i&&null!==a&&Promise.all([i,a]).then(function(e){var n=e[0],i=e[1],o=r.i(h.a)(t.idtype),u=r.i(_.c)(n);o.fillMapCache(u.dim(0).asList(i.length),i)})}var e={},i=null,a=null,p=null,l=null,d={rowIds:function(e,n){return null==i&&(i=r.i(f.a)("/dataset/table/"+e.id+"/rowIds").then(_.c),t(e)),i.then(function(t){return t.preMultiply(n,e.size)})},rows:function(e,n){return null==a&&(a=r.i(f.a)("/dataset/table/"+e.id+"/rows"),t(e)),a.then(function(t){return n.dim(0).filter(t,e.size[0])})},objs:function(t,e){return null==p&&(e.isAll||t.loadAtOnce)&&(p=r.i(f.a)("/dataset/table/"+t.id+"/raw").then(function(e){return s(e,t)})),e.isAll?p:null!=p?p.then(function(r){return e.filter(r,t.size)}):r.i(f.c)("/dataset/table/"+t.id+"/raw",{range:e.toString()}).then(function(e){return s(e,t)})},data:function(t,e){return null==l&&(e.isAll||t.loadAtOnce)&&(l=d.objs(t,r.i(_.e)()).then(function(e){return c(e,t.columns)})),e.isAll?l:null!=l?l.then(function(r){return e.filter(r,t.size)}):d.objs(t,e).then(function(e){return c(e,t.columns)})},col:function(t,i,o){var a=t.columns.find(function(t){return t.column===i||t.name===i});return null==e[i]&&(o.isAll||t.loadAtOnce)&&(null===p?t.loadAtOnce?(p=r.i(f.a)("/dataset/table/"+t.id+"/raw").then(function(e){return s(e,t)}),e[i]=p.then(function(t){return t.map(function(t){return t[i]})})):e[i]=r.i(f.a)("/dataset/table/"+t.id+"/col/"+i).then(function(t){return u(t,a)}):e[i]=p.then(function(t){return t.map(function(t){return t[i]})})),o.isAll?e[i]:null!=e[i]?e[i].then(function(e){return n(e,o,t)}):r.i(f.c)("/dataset/table/"+t.id+"/col/"+i,{range:o.toString()}).then(function(t){return u(t,a)})},view:function(t,e,r){return o(e,r)}};return d}function c(t,e){return t.map(function(t){return e.map(function(e){return t[e.column]})})}function p(t,e){var n=void 0;return function(i){function o(t){return t.getter?t.getter:function(e){return e[t.column]}}if(n)return Promise.resolve(n);var u="function"==typeof e?e:function(t){return t[e.toString()]},s=i.columns.map(o),a=t.map(function(t){var e={_:t};return i.columns.forEach(function(r,n){e[r.column]=s[n](t)}),e}),c=t.map(u);return n={rowIds:i.rowassigner?i.rowassigner.map(c):r.i(_.k)(0,t.length),rows:c,objs:a,data:s.map(function(e){return t.map(e)})},Promise.resolve(n)}}var f=r(90),_=r(217),l=r(227),h=r(221);e.a=i,e.b=a,e.c=p}});