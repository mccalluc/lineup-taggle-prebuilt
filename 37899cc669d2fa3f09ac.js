/*! lineup - v1.0.0-20180405-195047 - 2018
* http://caleydo.org/tools/taggle
* Copyright (c) 2018 Samuel Gratzl; Licensed BSD-3-Clause*/
webpackJsonp([7,11],{216:function(t,e,n){"use strict";function r(t){var e=this,r=t.idType||"Custom";return new Promise(function(i){return f.b(e,void 0,void 0,function(){var e,o,s;return f.c(this,function(u){switch(u.label){case 0:return[4,n.i(h.a)()];case 1:return e=u.sent(),o=e.filter(function(t){return!n.i(h.b)(t)}),s=n.i(l.createDialog)("Edit IDType","idtype",function(){var e=s.body.querySelector("input").value,r=o.find(function(t){return t.id===e}),u=r?r.id:e;s.hide(),t.type="idType",t.idType=u,n.i(p.a)(u),i(t)}),s.body.innerHTML='\n        <div class="form-group">\n          <label for="idType_new">New IDType</label>\n          <input type="text" class="form-control" id="idType_new" value="'+(o.some(function(t){return t.id===r})?"":r)+'">\n        </div>\n    ',s.show(),[2]}})})})}function i(t,e,n){return f.b(this,void 0,void 0,function(){var r,i,o,u,c;return f.c(this,function(a){switch(a.label){case 0:return r=t,void 0!==r.idType?[2,t]:(i=s(e,n,Math.min(e.length,100)),[4,i]);case 1:return o=a.sent(),u=o.map(function(t){return t.confidence}),c=Math.max.apply(Math,u),r.idType=c>.7?o[u.indexOf(c)].idType:"Custom",[2,t]}})})}function o(t,e,r,i,o){return f.b(this,void 0,void 0,function(){var u,c,a,p;return f.c(this,function(f){switch(f.label){case 0:return(u=n.i(l.numerical)().isType(t,e,r,i,o))>.8?[2,0]:(c=s(r,i,o),[4,c]);case 1:return a=f.sent(),p=a.map(function(t){return t.confidence}),[2,Math.max.apply(Math,p)]}})})}function s(t,e,r){return f.b(this,void 0,void 0,function(){var i,o=this;return f.c(this,function(s){switch(s.label){case 0:return i=n.i(d.c)(y).map(function(n){return f.b(o,void 0,void 0,function(){var i,o,s,u;return f.c(this,function(c){switch(c.label){case 0:return[4,n.load()];case 1:return i=c.sent(),o=n.options?n.options:null,s=i.factory(),[4,s.detectIDType(t,e,r,o)];case 2:return u=c.sent(),[2,{idType:n.idType,confidence:u}]}})})}),[4,Promise.all(i)];case 1:return[2,s.sent()]}})})}function u(t,e,n){return[]}function c(t,e){return f.b(this,void 0,void 0,function(){var r,i,o=this;return f.c(this,function(s){switch(s.label){case 0:return[4,n.i(h.a)()];case 1:return r=s.sent(),i=r.filter(function(t){return!n.i(h.b)(t)}),[2,'<optgroup label="Identifier" data-type="'+this.id+'">\n        '+i.map(function(n){return'<option value="'+n.id+'" '+(t&&t.id===o.id&&n.name===e.idType?'selected="selected"':"")+">"+n.name+"</option>"}).join("\n")+"\n    </optgroup>"]}})})}function a(){return{isType:o,parse:u,guessOptions:i,edit:r,getOptionsMarkup:c}}Object.defineProperty(e,"__esModule",{value:!0});var f=n(0),p=n(221),h=n(230),l=n(17),d=n(21);e.idType=a;var y="idTypeDetector"},217:function(t,e,n){"use strict";function r(t){return void 0===t&&(t=null),null===t?n.i(h.a)():t instanceof h.b?t:Array.isArray(t)?Array.isArray(t[0])?o.apply(void 0,t):o(t):n.i(l.a)(Array.from(arguments).map(String).join(","))}function i(){if(0===arguments.length)return n.i(h.a)();var t=new h.b;return Array.isArray(arguments[0])?Array.from(arguments).forEach(function(e,n){0!==e.length&&t.dim(n).setSlice(e[0],e[1],e[2])}):"[object Object]"===Object.prototype.toString.call(arguments[0])?Array.from(arguments).forEach(function(e,n){t.dim(n).setSlice(e.from,e.to,e.step)}):"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function o(){if(0===arguments.length)return n.i(h.a)();if(Array.isArray(arguments[0])&&arguments[0][0]instanceof a.a)return new h.b(arguments[0]);if(Array.isArray(arguments[0])){var t=new h.b;return Array.from(arguments).forEach(function(e,n){e instanceof a.a?t.dims[n]=e:t.dim(n).setList(e)}),t}if("number"==typeof arguments[0]){var e=new h.b;return e.dim(0).setList(Array.from(arguments)),e}return arguments[0]instanceof a.a?new h.b(Array.from(arguments)):n.i(h.c)()}function s(){if(0===arguments.length)return n.i(h.a)();var t=arguments[0];return Array.isArray(t)||(t=Array.from(arguments)),new h.b(t.map(function(t){return t.dim(0)}))}function u(t){return new p.a("unnamed","gray",t)}function c(t,e){return new f.a(t,e)}var a=n(219),f=n(223),p=n(225),h=n(224),l=n(234);n.d(e,"l",function(){return h.b}),n.d(e,"e",function(){return h.a}),n.d(e,"b",function(){return h.c}),n.d(e,"d",function(){return a.a}),n.d(e,"g",function(){return f.a}),n.d(e,"i",function(){return p.a}),e.c=r,e.k=i,e.a=o,e.f=s,e.h=u,e.j=c},218:function(t,e,n){"use strict";function r(t){if(!t)return s.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return s.ADD;case"remove":return s.REMOVE;default:return s.SET}return+t}function i(t,e){for(;t.ndim<e;)t.dims[t.ndim]=o.d.none();return t}var o=n(217);n.d(e,"b",function(){return u}),n.d(e,"a",function(){return s}),e.c=r,e.d=i;var s,u="selected";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(s||(s={}))},219:function(t,e,n){"use strict";function r(t,e){return t-e}var i=n(228),o=n(222),s=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([i.a.all()])},t.single=function(e){return new t([i.a.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[i.a.single(t[0])];for(var e=[],n=t.slice(1).map(function(e,n){return e-t[n]}),r=0,o=1,s=0;o<t.length;){for(;n[r]===n[o-1]&&o<t.length;)o++;if(o===r+1)e.push(i.a.single(t[r]));else if(1===n[r])e.push(i.a.range(t[r],t[o-1]+n[r],n[r]));else for(s=r;s<o;s++)e.push(i.a.single(t[s]));r=o,o+=1}for(;r<t.length;)e.push(i.a.single(t[r++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?i.a.parse(t.toString()):"number"==typeof t?i.a.single(t):Array.isArray(t)?new i.a(t[0],t[1],t[2]):t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(r=this.arr).push.apply(r,e.map(t));var r},t.prototype.pushSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.push(new i.a(t,e,n))},t.prototype.pushList=function(e){(n=this.arr).push.apply(n,t.compress(e));var n},t.prototype.setSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.length=0,this.pushSlice(t,e,n)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?i.a.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var n=this.arr.slice(),r=1;r<e;++r)n.push.apply(n,this.arr);return new t(n)},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var r=this.iter(n).asList(),i=function(t){var e=t.iter(r.length),n=[];return e.forEach(function(t){t>=0&&t<r.length&&n.push(r[t])}),t.fromLike(n)};if("function"==typeof e.fromLikeComposite){var o=e;return o.fromLikeComposite(o.groups.map(i))}return i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var n=this.iter(e).asList();return t.iter(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)}),t.fromLike(n.sort(r))},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var i=this.iter(n).asList(),o=e.iter(n),s=[];return o.forEach(function(t){i.indexOf(t)>=0&&s.push(t)}),e.fromLike(s.sort(r))},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var i=this.iter(n),o=e.iter(n).asList(),s=[];return i.forEach(function(t){o.indexOf(t)<0&&s.push(t)}),t.from(s.sort(r))},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var n=this.arr[0].size(e),r=0,i=n,o=this.arr.length-1;i<t&&r<o;)r++,n=this.arr[r].size(e),i+=n;return r>=this.arr.length?-1:this.arr[r].invert(t-i+n,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof Range)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=Array.from(arguments);return 0===t.length?[]:t.map(function(t,n){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,n){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var r;if(this.isIdentityRange){var i=this.arr[0].to;r=function(t,e){t>=0&&t<i&&e.push(t)}}else{var o=this.iter().asList();r=function(t,e){var n=o.indexOf(t);n>=0&&e.push(n)}}if("function"==typeof e.fromLikeComposite){var s=e;return s.fromLikeComposite(s.groups.map(function(t){var e=[];return t.forEach(function(t){return r(t,e)}),t.fromLike(e)}))}var u=[];return e.forEach(function(t){return r(t,u)}),e.fromLike(u)},t.prototype.filter=function(t,e,n){if(void 0===n&&(n=function(t){return t}),this.isAll)return t.map(n);var r=this.iter(e);if(r.byOne&&r instanceof o.a)return t.slice(r.from,r.to).map(n);for(var i=[];r.hasNext();)i.push(n(t[r.next()]));return i},t.prototype.iter=function(t){if(this.isList)return n.i(o.b)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return o.c.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(n){return n.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=r);var e=this.iter().asList(),n=e.sort(t);return this.fromLike(n)},t.prototype.removeDuplicates=function(e){var n=this.iter().asList();return n=n.sort(r),n=n.filter(function(t,e){return t!==n[e-1]}),t.from(n)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}();e.a=s},220:function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={});var r=JSON.stringify(e),i=t.length+r.length,s=i<2e3?"GET":"POST";return n.i(o.b)(t,e,s)}var i=n(24),o=n(90),s=n(40),u=n(217),c=n(218),a=n(230),f=n(91),p=function(t){function e(e,n,r,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=n,o.names=r,o.internal=i,o.sel=new Map,o.name2idCache=new Map,o.id2nameCache=new Map,o.canBeMappedTo=null,o}return i.a(e,t),e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,n){return t[n]=e.toString()}),{sel:t,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(n){return e.sel.set(n,t.sel[n])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){if(void 0===t&&(t=c.b),this.sel.has(t))return this.sel.get(t);var e=n.i(u.b)();return this.sel.set(t,e),e},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():c.b,r=n.i(u.c)(t[0]),i=n.i(c.c)(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,r,i){void 0===r&&(r=c.a.SET),void 0===i&&(i=c.b);var o=this.selections(i),s=n.i(u.b)();switch(r){case c.a.SET:s=t;break;case c.a.ADD:s=o.union(t);break;case c.a.REMOVE:s=o.without(t)}if(o.eq(s))return o;this.sel.set(i,s);var a=r!==c.a.REMOVE?t:n.i(u.b)(),f=r===c.a.ADD?n.i(u.b)():r===c.a.SET?o:t;return this.fire(e.EVENT_SELECT,i,s,a,f,o),this.fire(e.EVENT_SELECT+"-"+i,s,a,f,o),o},e.prototype.clear=function(t){return void 0===t&&(t=c.b),this.selectImpl(n.i(u.b)(),c.a.SET,t)},e.prototype.fillMapCache=function(t,e){var n=this;t.forEach(function(t,r){var i=String(e[r]);n.name2idCache.set(i,t),n.id2nameCache.set(t,i)})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=n.i(o.a)("/idtype/"+this.id+"/").then(function(t){return t.map(a.c)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var i=n.i(a.c)(e),o=n.i(u.c)(t);return r("/idtype/"+this.id+"/"+i.id,{ids:o.toString(),mode:"first"})},e.prototype.mapNameToFirstName=function(t,e){var i=n.i(a.c)(e);return r("/idtype/"+this.id+"/"+i.id,{q:t,mode:"first"})},e.prototype.mapToName=function(t,e){var i=n.i(a.c)(e),o=n.i(u.c)(t);return r("/idtype/"+this.id+"/"+i.id,{ids:o.toString()})},e.prototype.mapNameToName=function(t,e){var i=n.i(a.c)(e);return r("/idtype/"+this.id+"/"+i.id,{q:t})},e.prototype.mapToFirstID=function(t,e){var i=n.i(a.c)(e),o=n.i(u.c)(t);return r("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var i=n.i(a.c)(e),o=n.i(u.c)(t);return r("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString()})},e.prototype.mapNameToFirstID=function(t,e){var i=n.i(a.c)(e);return r("/idtype/"+this.id+"/"+i.id+"/map",{q:t,mode:"first"})},e.prototype.mapNameToID=function(t,e){var i=n.i(a.c)(e);return r("/idtype/"+this.id+"/"+i.id+"/map",{q:t})},e.prototype.map=function(t){return i.b(this,void 0,void 0,function(){var e,o,s=this;return i.c(this,function(i){switch(i.label){case 0:return t=t.map(function(t){return String(t)}),e=t.filter(function(t){return!s.name2idCache.has(t)}),0===e.length?[2,n.i(f.a)(t.map(function(t){return s.name2idCache.get(t)}))]:[4,r("/idtype/"+this.id+"/map",{ids:e})];case 1:return o=i.sent(),e.forEach(function(t,e){s.name2idCache.set(t,o[e]),s.id2nameCache.set(o[e],t)}),[2,t.map(function(t){return s.name2idCache.get(t)})]}})})},e.prototype.unmap=function(t){return i.b(this,void 0,void 0,function(){var e,o,s,c,a,p=this;return i.c(this,function(i){switch(i.label){case 0:return e=n.i(u.c)(t),o=[],e.dim(0).forEach(function(t){return p.id2nameCache.has(t)?null:o.push(t)}),0===o.length?(s=[],e.dim(0).forEach(function(t){return s.push(p.id2nameCache.get(t))}),[2,n.i(f.a)(s)]):[4,r("/idtype/"+this.id+"/unmap",{ids:n.i(u.a)(o).toString()})];case 1:return c=i.sent(),o.forEach(function(t,e){var n=String(c[e]);p.id2nameCache.set(t,n),p.name2idCache.set(n,t)}),a=[],e.dim(0).forEach(function(t){return a.push(p.id2nameCache.get(t))}),[2,a]}})})},e.prototype.search=function(t,e){return void 0===e&&(e=10),i.b(this,void 0,void 0,function(){var r,s=this;return i.c(this,function(i){switch(i.label){case 0:return[4,n.i(o.a)("/idtype/"+this.id+"/search",{q:t,limit:e})];case 1:return r=i.sent(),r.forEach(function(t){var e=String(t.name);s.id2nameCache.set(t.id,e),s.name2idCache.set(e,t.id)}),[2,r]}})})},e.prototype.searchMapping=function(t,e,r){void 0===r&&(r=10);var i=n.i(a.c)(e);return n.i(o.a)("/idtype/"+this.id+"/"+i.id+"/search",{q:t,limit:r})},e}(s.a);e.a=p,p.EVENT_SELECT="select"},221:function(t,e,n){"use strict";var r=n(230);n.d(e,"d",function(){return r.d}),n.d(e,"a",function(){return r.c}),n.d(e,"h",function(){return r.e});var i=n(231);n.d(e,"f",function(){return i.a});var o=n(218);n.d(e,"c",function(){return o.b}),n.d(e,"g",function(){return o.a});var s=n(220);n.d(e,"b",function(){return s.a});var u=(n(235),n(226),n(237),n(236));n.d(e,"e",function(){return u.a})},222:function(t,e,n){"use strict";function r(){return new d}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?r():1===t.length?t[0]:new l(t)}function o(t,e,n){return new f(t,e,n)}function s(t){return new h(t)}function u(t){return new p(t)}var c=n(24);n.d(e,"a",function(){return f}),e.c=i,e.d=o,e.e=s,e.b=u;var a=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var n=0;this.hasNext();)t.call(e,this.next(),n++)},t.prototype.map=function(t,e){return new y(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),f=function(t){function e(e,n,r){var i=t.call(this)||this;return i.from=e,i.to=n,i.step=r,i.act=i.from,i}return c.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(a),p=function(t){function e(e){var n=t.call(this)||this;return n.arr=e,n.it=new f(0,e.length,1),n}return c.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(a),h=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n.delivered=!1,n}return c.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(a),l=function(t){function e(e){var n=t.call(this)||this;return n.its=e,n.act=e.shift(),n}return c.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(a),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return c.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(a),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.it=e,i.f=n,i.thisArg=r,i}return c.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(a)},223:function(t,e,n){"use strict";function r(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),o.a.from(e)}var i=n(24),o=n(219),s=function(t){function e(e,n,i){var o=t.call(this,i||r(n))||this;return o.name=e,o.groups=n,o}return i.a(e,t),e.prototype.preMultiply=function(n,r){var i=this.groups.length>1?t.prototype.preMultiply.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(n,r)}),i)},e.prototype.union=function(n,r){var i=this.groups.length>1?t.prototype.union.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.union(n,r)}),i)},e.prototype.intersect=function(n,r){var i=this.groups.length>1?t.prototype.intersect.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(n,r)}),i)},e.prototype.without=function(n,r){var i=this.groups.length>1?t.prototype.without.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.without(n,r)}),i)},e.prototype.clone=function(){var n=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),n)},e.prototype.sort=function(n){var r=this.groups.length>1?t.prototype.sort.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(n)}),r)},e.prototype.toSet=function(n){var r=this.groups.length>1?t.prototype.toSet.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(n)}),r)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e.prototype.fromLikeComposite=function(t){return new e(this.name,t)},e}(o.a);e.a=s},224:function(t,e,n){"use strict";function r(){return new s}function i(){return new s([o.a.none(),o.a.none()])}var o=n(219);e.a=r,e.c=i;var s=function(){function t(t){void 0===t&&(t=[]),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.preMultiply(e.dim(i),n?n[i]:void 0)}),r},t.prototype.union=function(e,n){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.union(e.dim(i),n?n[i]:void 0)}),r},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return i();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.intersect(e.dim(i),n?n[i]:void 0)}),r},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return i();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.without(e.dim(i),n?n[i]:void 0)}),r},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,n){e.dims[n]=t.clone()}),e},t.prototype.swap=function(){return new t(this.dims.map(function(t){return t.clone()}).reverse())},t.prototype.filter=function(t,e){if(this.isAll)return t;var n=this.ndim,r=this,i=function(t){if(t>=n)return function(t){return t};var o=r.dim(t),s=i(t+1),u=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,u,s):t}};return i(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=o.a.all(),this.dims[t])},t.prototype.invert=function(t,e){var n=this;return this.isAll?t:t.map(function(t,r){return n.dim(r).invert(t,e?e[r]:void 0)})},t.prototype.indexRangeOf=function(e,n){return e.isNone||this.isNone?i():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,r){return t.indexRangeOf(e.dim(r),n?n[r]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var n;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);n=arguments[0]}else n=Array.from(arguments);return 0===n.length?[]:n.map(function(t,n){return e.dim(n).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,n){return e.size(t?t[n]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var n=this,r=this.ndim,i=function(o){var s=o.length;if(s<r){n.dims[s].iter(e?e[s]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}();e.b=s},225:function(t,e,n){"use strict";var r=n(24),i=n(219),o=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.name=e,i.color=n,i}return r.a(e,t),e.prototype.preMultiply=function(n,r){var i=t.prototype.preMultiply.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.union=function(n,r){var i=t.prototype.union.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.intersect=function(n,r){var i=t.prototype.intersect.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.without=function(n,r){var i=t.prototype.without.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(n){return new e(this.name,this.color,t.prototype.toSet.call(this,n))},e.prototype.fromLike=function(n){return new e(this.name,this.color,t.prototype.fromLike.call(this,n))},e}(i.a);e.a=o},226:function(t,e,n){"use strict";function r(t,e,n){if(0===e.ndim)return!0;for(var r=function(n){var r=t.dim(n),i=e.dim(n);return i.isAll||r.isAll?{value:!0}:!r.isUnbound&&r.asList().every(function(t){return!i.contains(t)})?{value:!1}:void 0},i=0;i<Math.min(t.ndim,n);++i){var o=r(i);if("object"==typeof o)return o.value}return!1}function i(t,e,n){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return r(t,e,n)})||i.push(t)}),i}var o=n(24),s=n(40),u=n(217),c=n(218),a=n(220),f=function(t){function e(n,r){void 0===r&&(r=!1);var i=t.call(this)||this;return i.elems=n,i.internal=r,i.sel=new Map,i.isOn=!1,i.selectionListener=function(t,n,r,o,s){i.fire(e.EVENT_SELECT_DIM+","+e.EVENT_SELECT_PRODUCT,i.elems.indexOf(t.currentTarget),n,r,o,s),i.fire(e.EVENT_SELECT_DIM+"-"+n+","+e.EVENT_SELECT_PRODUCT+"-"+n,i.elems.indexOf(t.currentTarget),r,o,s)},i}return o.a(e,t),e.prototype.on=function(e,n){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on(a.a.EVENT_SELECT,t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off(a.a.EVENT_SELECT,t.selectionListener)})},e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,n){return t[n]=e.map(function(t){return t.toString()})}),{sel:t}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(n){return e.sel.set(n,t.sel[n].map(u.c))}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){return void 0===t&&(t=c.b),this.sel.has(t)?this.sel.get(t).slice():(this.sel.set(t,[]),[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=c.b);var r=this.selections(t),i=this.toPerDim(r);return this.elems.forEach(function(o,s){var c=o.selections(t),a=c.without(i[s]);a.isNone||r.push(n.i(u.a)(e.elems.map(function(t){return o===t?a.dim(0):u.d.all()})))}),r},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():c.b,r=t[0].map(u.c),i=n.i(c.c)(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,n,r){void 0===n&&(n=c.a.SET),void 0===r&&(r=c.b);var o=t.map(u.c),s=this.selections(r),f=[];switch(n){case c.a.SET:f=o;break;case c.a.ADD:f=s.concat(o);break;case c.a.REMOVE:f=i(s,o,this.elems.length)}this.sel.set(r,f);var p=this.toPerDim(f);this.disable(),this.elems.forEach(function(t,e){return t.select(r,p[e])}),this.enable();var h=n!==c.a.REMOVE?o:[],l=n===c.a.ADD?[]:n===c.a.SET?s:o;return this.fire(a.a.EVENT_SELECT,r,f,h,l,s),this.fire(e.EVENT_SELECT_PRODUCT,-1,r,f,h,l,s),this.fire(a.a.EVENT_SELECT+"-"+r,f,h,l,s),this.fire(e.EVENT_SELECT_PRODUCT+"-"+r,-1,f,h,l,s),s},e.prototype.toPerDim=function(t){return this.elems.map(function(e,r){if(0===t.length)return n.i(u.b)();var i=t.map(function(t){return t.dim(r)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return n.i(u.a)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=c.b),this.selectImpl([],c.a.SET,t)},e}(s.a);e.a=f,f.EVENT_SELECT_DIM="selectDim",f.EVENT_SELECT_PRODUCT="selectProduct"},228:function(t,e,n){"use strict";var r=n(229),i=n(222),o=n(233),s=function(){function t(t,e,n){if(void 0===e&&(e=-1),void 0===n&&(n=1),this.from=t,this.to=e,this.step=n,0===n)throw new Error("invalid step size: "+n)}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new o.a(t)},t.range=function(e,n,r){return void 0===n&&(n=-1),void 0===r&&(r=1),e+r===n?t.single(e):new t(e,n,r)},t.prototype.size=function(t){var e=n.i(r.a)(this.to,t),i=n.i(r.a)(this.from,t);if(1===this.step)return Math.max(e-i,0);if(-1===this.step)return-1===this.to?Math.max(i- -1,0):Math.max(i-e,0);var o=this.step>0?e-i+1:i-e+1,s=Math.abs(this.step);return o<=0?0:Math.floor(o/s)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){if(this.step>0){var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)}var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:n.i(r.a)(this.from,e)+t*this.step},t.prototype.iter=function(t){return this.step<0&&-1===this.to?n.i(i.d)(n.i(r.a)(this.from,t),-1,this.step):n.i(i.d)(n.i(r.a)(this.from,t),n.i(r.a)(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){if(this.isAll)return!0;var i=n.i(r.a)(this.from,e),o=n.i(r.a)(this.to,e);return-1===this.step?-1===this.to?t<=i&&t>=0:t<=i&&t>o:1===this.step?t>=i&&t<o:this.iter(e).asList().indexOf(t)>=0},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var n=function(t,e){if(void 0===e&&(e=NaN),""===(t=t.trim())&&!isNaN(e))return e;var n=parseInt(t,10);if(isNaN(n))throw Error('parse error: "'+t+'" is not a valid integer');return n},r=e.split(":");switch(r.length){case 1:return t.single(n(r[0]));case 2:return new t(n(r[0],0),n(r[1],-1));case 3:return new t(n(r[0],0),n(r[1],-1),n(r[2],1));default:throw new Error('parse error: "'+e+'" is not a valid range specifier')}},t}();e.a=s},229:function(t,e,n){"use strict";function r(t,e){return t<0?e+1+t:t}e.a=r},230:function(t,e,n){"use strict";function r(t){t.forEach(function(t){var e=m.get(t.id),r=!1;e?e instanceof d.a&&(e.name=t.name,e.names=t.names):(e=new d.a(t.id,t.name,t.names),r=!0),m.set(t.id,e),r&&n.i(l.b)(g,e)})}function i(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function o(t){if(t instanceof d.a)return t;var e=t;return a(e,new d.a(e,e,i(e)))}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new y.a(t);return a(n.id,n)}function u(){return Array.from(m.values())}function c(){return p.b(this,void 0,void 0,function(){var t;return p.c(this,function(e){switch(e.label){case 0:return v?[2,Promise.resolve(u())]:[4,n.i(h.a)("/idtype/",{},[])];case 1:return t=e.sent(),v=!0,r(t),[2,u()]}})})}function a(t,e){return m.has(t)?m.get(t):(m.set(t,e),n.i(l.b)("register.idtype",e),e)}function f(t){return t.internal||t.id.startsWith("_")}var p=n(24),h=n(90),l=n(40),d=(n(218),n(220)),y=n(226);e.c=o,e.e=s,e.d=u,e.a=c,e.b=f;var m=new Map,v=!1,g="register.idtype"},231:function(t,e,n){"use strict";var r=n(24),i=n(40),o=n(217),s=n(218),u=n(220),c=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.numSelectListeners=0,i.selectionListeners=[],i.singleSelectionListener=function(t,o,u,c,a){return r.b(i,void 0,void 0,function(){var t;return r.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return t=r.sent(),(u=t.indexOf(u),c=t.indexOf(c),a=t.indexOf(a),u.isNone&&c.isNone&&a.isNone)?[2]:(n.i(s.d)(u,t.ndim),n.i(s.d)(c,t.ndim),n.i(s.d)(a,t.ndim),this.fire(e.EVENT_SELECT,o,u,c,a),this.fire(e.EVENT_SELECT+"-"+o,u,c,a),[2])}})})},i.selectionCache=[],i.accumulateEvents=-1,i}return r.a(e,t),e.prototype.fromIdRange=function(t){return void 0===t&&(t=n.i(o.e)()),r.b(this,void 0,void 0,function(){return r.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return[2,e.sent().indexOf(n.i(o.c)(t))]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,n){var r=this;return function(t,i,o,s,u){r.selectionCache[e]={act:o,added:s,removed:u},(r.accumulateEvents<0||++r.accumulateEvents===n)&&r.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var r=this,i=this.idtypes,s=i.map(function(e,i){var s=r.selectionCache[i];return s||{act:e.selections(t),added:n.i(o.b)(),removed:n.i(o.b)()}}),u=n.i(o.f)(s.map(function(t){return t.act})),c=n.i(o.f)(s.map(function(t){return t.added})),a=n.i(o.f)(s.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.singleSelectionListener(null,t,u,c,a)},e.prototype.on=function(n,r){var i=this;if("string"==typeof n&&(n===e.EVENT_SELECT||"select-"===n.slice(0,"select-".length))&&1===++this.numSelectListeners){var o=this.idtypes;1===o.length?(this.selectionListeners.push(this.singleSelectionListener),o[0].on(e.EVENT_SELECT,this.singleSelectionListener)):o.forEach(function(t,n){var r=i.selectionListener(t,n,o.length);i.selectionListeners.push(r),t.on(e.EVENT_SELECT,r)})}return t.prototype.on.call(this,n,r)},e.prototype.off=function(n,r){var i=this;return"string"!=typeof n||n!==e.EVENT_SELECT&&"select-"!==n.slice(0,"select-".length)||0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,n){return t.off(e.EVENT_SELECT,i.selectionListeners[n])}),this.selectionListeners=[]),t.prototype.off.call(this,n,r)},e.prototype.selections=function(t){return void 0===t&&(t=s.b),r.b(this,void 0,void 0,function(){var e,i;return r.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return e=r.sent(),i=n.i(o.f)(this.idtypes.map(function(e){return e.selections(t)})),[2,e.indexRangeOf(i)]}})})},e.prototype.select=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t.shift():s.b,i=n.i(o.c)(t[0]),u=n.i(s.c)(t[1]);return this.selectImpl(i,u,r,e)},e.prototype.selectImpl=function(t,e,i,u){return void 0===e&&(e=s.a.SET),void 0===i&&(i=s.b),void 0===u&&(u=-1),r.b(this,void 0,void 0,function(){var s,c,a;return r.c(this,function(r){switch(r.label){case 0:return s=this.idtypes,[4,this.ids()];case 1:if(c=r.sent(),-1===u){for(t=c.preMultiply(t),this.accumulateEvents=0,a=n.i(o.f)(t.split().map(function(t,n){return s[n].select(i,t,e)})),this.accumulateEvents>0&&this.fillAndSend(i,-1);a.ndim<s.length;)a.dim(a.ndim);return[2,c.indexRangeOf(a)]}return c=c.split()[u],t=c.preMultiply(t),s[u].select(i,t,e),[2,c.indexRangeOf(t)]}})})},e.prototype.clear=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t[0]:s.b;return this.selectImpl(n.i(o.b)(),s.a.SET,r,e)},e}(i.a);c.EVENT_SELECT=u.a.EVENT_SELECT,e.a=c},233:function(t,e,n){"use strict";var r=n(229),i=n(222),o=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return n.i(r.a)(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return n.i(r.a)(this.from,e)+t},t.prototype.iter=function(t){return n.i(i.e)(n.i(r.a)(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}();e.a=o},234:function(t,e,n){"use strict";function r(t){var e,n,r=[],c=0;for(t=t.trim();c<t.length;)switch(e=t.charAt(c)){case'"':n=i(t,c),c=n.act+1,r.push(n.dim);break;case",":c++,r.push(u.a.all());break;default:e.match(/\s/)?c++:(n=o(t,c),c=n.act+1,r.push(n.dim))}return","===t.charAt(t.length-1)&&r.push(u.a.all()),new s.b(r)}function i(t,e){e+=1;var n,r=t.indexOf('"',e),s=t.slice(e,r);switch(e=r+1,t.charAt(e)){case'"':return r=t.indexOf('"',e+1),n=o(t,r+1),{dim:new c.a(s,t.slice(e+1,r),n.dim),act:n.act};case"{":for(var a=[];"}"!==t.charAt(e);)n=i(t,e+1),a.push(n.dim),e=n.act;return{dim:new f.a(s,a),act:n.act+1};default:return{dim:u.a.all(),act:e}}}function o(t,e){var n,r;switch(t.charAt(e)){case",":case"}":n=e,r=u.a.all();break;case"(":r=new u.a,n=t.indexOf(")",e),n>e+1&&r.push.apply(r,t.slice(e+1,n).split(",").map(a.a.parse)),n+=1;break;default:n=t.indexOf("}",e);var i=t.indexOf(",",e);n>=0&&i>=0?n=Math.min(n,i):n<0&&(n=i),n<0&&(n=t.length),r=new u.a([a.a.parse(t.slice(e,n))])}return{act:n,dim:r}}var s=n(224),u=n(219),c=n(225),a=n(228),f=n(223);e.a=r},235:function(t,e,n){"use strict";var r=n(24),i=n(217),o=n(218),s=n(231),u=n(226),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,r,i){var s=e.producttype.productSelections(i);if(0===s.length)return e.fire(u.a.EVENT_SELECT_PRODUCT,i,[]),void e.fire(u.a.EVENT_SELECT_PRODUCT+"-"+i,[]);e.ids().then(function(t){var r=s.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==r.length&&(r.forEach(function(e){return n.i(o.d)(e,t.ndim)}),e.fire(u.a.EVENT_SELECT_PRODUCT,i,r),e.fire(u.a.EVENT_SELECT_PRODUCT+"-"+i,r))})},e}return r.a(e,t),e.prototype.on=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,n)},e.prototype.off=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,n)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=o.b),this.ids().then(function(r){var i=e.producttype.productSelections(t),s=i.map(function(t){return r.indexRangeOf(t)}).filter(function(t){return!t.isNone});return s.forEach(function(t){return n.i(o.d)(t,r.ndim)}),s})},e.prototype.selectProduct=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():o.b,r=t[0].map(i.c),s=n.i(o.c)(t[1]);return this.selectProductImpl(r,s,e)},e.prototype.selectProductImpl=function(t,e,n){var r=this;return void 0===e&&(e=o.a.SET),void 0===n&&(n=o.b),this.ids().then(function(i){return t=t.map(function(t){return i.preMultiply(t)}),r.producttype.select(n,t,e)})},e.prototype.clear=function(){var t=Array.from(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:o.b;return this.selectProductImpl([],o.a.SET,e||o.b)},e}(s.a);e.a=c},236:function(t,e,n){"use strict";function r(){var t=new s;return t.map.bind(t)}var i=n(12),o=n(217);e.a=r;var s=function(){function t(){this.pool=new i.i,this.lookup=new Map}return t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,n=Object.keys(this.lookup);return t.map(function(t){for(var r in n)if(e.lookup.get(r)===t)return r;return null})},t.prototype.mapOne=function(t){return this.lookup.has(t)?this.lookup.get(t):(this.lookup.set(t,this.pool.checkOut()),this.lookup.get(t))},t.prototype.map=function(t){var e=this,n=t.map(function(t){return e.mapOne(t)});return o.a.apply(void 0,n)},t}()},237:function(t,e,n){"use strict";var r=n(24),i=n(12),o=n(218),s=n(220);!function(t){function e(e,n){var r=t.call(this,e,n,n+"s",!0)||this;return r.instances=[],r.pool=new i.i,r}r.a(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var n=this;this.instances.forEach(function(r,i){return n.pool.isCheckedOut(i)?t.call(e,r):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,n){return t.pool.isCheckedOut(n)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,n=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(n=this.instances[t],delete this.instances[t],this.fire("remove",t,n)),this.selectionTypes().forEach(function(n){e.select(n,[t],o.a.REMOVE)}),this.pool.checkIn(t),n},e.prototype.selectedObjects=function(t){return void 0===t&&(t=o.b),this.selections(t).filter(this.instances)}}(s.a)}});