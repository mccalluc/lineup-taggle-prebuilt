/*! lineup - v1.0.0-20180405-195047 - 2018
* http://caleydo.org/tools/taggle
* Copyright (c) 2018 Samuel Gratzl; Licensed BSD-3-Clause*/
webpackJsonp([0,11],{217:function(t,e,n){"use strict";function r(t){return void 0===t&&(t=null),null===t?n.i(c.a)():t instanceof c.b?t:Array.isArray(t)?Array.isArray(t[0])?o.apply(void 0,t):o(t):n.i(h.a)(Array.from(arguments).map(String).join(","))}function i(){if(0===arguments.length)return n.i(c.a)();var t=new c.b;return Array.isArray(arguments[0])?Array.from(arguments).forEach(function(e,n){0!==e.length&&t.dim(n).setSlice(e[0],e[1],e[2])}):"[object Object]"===Object.prototype.toString.call(arguments[0])?Array.from(arguments).forEach(function(e,n){t.dim(n).setSlice(e.from,e.to,e.step)}):"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function o(){if(0===arguments.length)return n.i(c.a)();if(Array.isArray(arguments[0])&&arguments[0][0]instanceof u.a)return new c.b(arguments[0]);if(Array.isArray(arguments[0])){var t=new c.b;return Array.from(arguments).forEach(function(e,n){e instanceof u.a?t.dims[n]=e:t.dim(n).setList(e)}),t}if("number"==typeof arguments[0]){var e=new c.b;return e.dim(0).setList(Array.from(arguments)),e}return arguments[0]instanceof u.a?new c.b(Array.from(arguments)):n.i(c.c)()}function y(){if(0===arguments.length)return n.i(c.a)();var t=arguments[0];return Array.isArray(t)||(t=Array.from(arguments)),new c.b(t.map(function(t){return t.dim(0)}))}function s(t){return new p.a("unnamed","gray",t)}function a(t,e){return new x.a(t,e)}var u=n(219),x=n(223),p=n(225),c=n(224),h=n(234);n.d(e,"l",function(){return c.b}),n.d(e,"e",function(){return c.a}),n.d(e,"b",function(){return c.c}),n.d(e,"d",function(){return u.a}),n.d(e,"g",function(){return x.a}),n.d(e,"i",function(){return p.a}),e.c=r,e.k=i,e.a=o,e.f=y,e.h=s,e.j=a},219:function(t,e,n){"use strict";function r(t,e){return t-e}var i=n(228),o=n(222),y=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([i.a.all()])},t.single=function(e){return new t([i.a.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[i.a.single(t[0])];for(var e=[],n=t.slice(1).map(function(e,n){return e-t[n]}),r=0,o=1,y=0;o<t.length;){for(;n[r]===n[o-1]&&o<t.length;)o++;if(o===r+1)e.push(i.a.single(t[r]));else if(1===n[r])e.push(i.a.range(t[r],t[o-1]+n[r],n[r]));else for(y=r;y<o;y++)e.push(i.a.single(t[y]));r=o,o+=1}for(;r<t.length;)e.push(i.a.single(t[r++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?i.a.parse(t.toString()):"number"==typeof t?i.a.single(t):Array.isArray(t)?new i.a(t[0],t[1],t[2]):t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(r=this.arr).push.apply(r,e.map(t));var r},t.prototype.pushSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.push(new i.a(t,e,n))},t.prototype.pushList=function(e){(n=this.arr).push.apply(n,t.compress(e));var n},t.prototype.setSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.length=0,this.pushSlice(t,e,n)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?i.a.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var n=this.arr.slice(),r=1;r<e;++r)n.push.apply(n,this.arr);return new t(n)},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var r=this.iter(n).asList(),i=function(t){var e=t.iter(r.length),n=[];return e.forEach(function(t){t>=0&&t<r.length&&n.push(r[t])}),t.fromLike(n)};if("function"==typeof e.fromLikeComposite){var o=e;return o.fromLikeComposite(o.groups.map(i))}return i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var n=this.iter(e).asList();return t.iter(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)}),t.fromLike(n.sort(r))},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var i=this.iter(n).asList(),o=e.iter(n),y=[];return o.forEach(function(t){i.indexOf(t)>=0&&y.push(t)}),e.fromLike(y.sort(r))},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var i=this.iter(n),o=e.iter(n).asList(),y=[];return i.forEach(function(t){o.indexOf(t)<0&&y.push(t)}),t.from(y.sort(r))},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var n=this.arr[0].size(e),r=0,i=n,o=this.arr.length-1;i<t&&r<o;)r++,n=this.arr[r].size(e),i+=n;return r>=this.arr.length?-1:this.arr[r].invert(t-i+n,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof Range)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=Array.from(arguments);return 0===t.length?[]:t.map(function(t,n){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,n){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var r;if(this.isIdentityRange){var i=this.arr[0].to;r=function(t,e){t>=0&&t<i&&e.push(t)}}else{var o=this.iter().asList();r=function(t,e){var n=o.indexOf(t);n>=0&&e.push(n)}}if("function"==typeof e.fromLikeComposite){var y=e;return y.fromLikeComposite(y.groups.map(function(t){var e=[];return t.forEach(function(t){return r(t,e)}),t.fromLike(e)}))}var s=[];return e.forEach(function(t){return r(t,s)}),e.fromLike(s)},t.prototype.filter=function(t,e,n){if(void 0===n&&(n=function(t){return t}),this.isAll)return t.map(n);var r=this.iter(e);if(r.byOne&&r instanceof o.a)return t.slice(r.from,r.to).map(n);for(var i=[];r.hasNext();)i.push(n(t[r.next()]));return i},t.prototype.iter=function(t){if(this.isList)return n.i(o.b)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return o.c.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(n){return n.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=r);var e=this.iter().asList(),n=e.sort(t);return this.fromLike(n)},t.prototype.removeDuplicates=function(e){var n=this.iter().asList();return n=n.sort(r),n=n.filter(function(t,e){return t!==n[e-1]}),t.from(n)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}();e.a=y},222:function(t,e,n){"use strict";function r(){return new f}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?r():1===t.length?t[0]:new h(t)}function o(t,e,n){return new x(t,e,n)}function y(t){return new c(t)}function s(t){return new p(t)}var a=n(24);n.d(e,"a",function(){return x}),e.c=i,e.d=o,e.e=y,e.b=s;var u=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var n=0;this.hasNext();)t.call(e,this.next(),n++)},t.prototype.map=function(t,e){return new l(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),x=function(t){function e(e,n,r){var i=t.call(this)||this;return i.from=e,i.to=n,i.step=r,i.act=i.from,i}return a.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(u),p=function(t){function e(e){var n=t.call(this)||this;return n.arr=e,n.it=new x(0,e.length,1),n}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(u),c=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n.delivered=!1,n}return a.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(u),h=function(t){function e(e){var n=t.call(this)||this;return n.its=e,n.act=e.shift(),n}return a.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(u),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return a.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(u),l=function(t){function e(e,n,r){var i=t.call(this)||this;return i.it=e,i.f=n,i.thisArg=r,i}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(u)},223:function(t,e,n){"use strict";function r(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),o.a.from(e)}var i=n(24),o=n(219),y=function(t){function e(e,n,i){var o=t.call(this,i||r(n))||this;return o.name=e,o.groups=n,o}return i.a(e,t),e.prototype.preMultiply=function(n,r){var i=this.groups.length>1?t.prototype.preMultiply.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(n,r)}),i)},e.prototype.union=function(n,r){var i=this.groups.length>1?t.prototype.union.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.union(n,r)}),i)},e.prototype.intersect=function(n,r){var i=this.groups.length>1?t.prototype.intersect.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(n,r)}),i)},e.prototype.without=function(n,r){var i=this.groups.length>1?t.prototype.without.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.without(n,r)}),i)},e.prototype.clone=function(){var n=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),n)},e.prototype.sort=function(n){var r=this.groups.length>1?t.prototype.sort.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(n)}),r)},e.prototype.toSet=function(n){var r=this.groups.length>1?t.prototype.toSet.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(n)}),r)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e.prototype.fromLikeComposite=function(t){return new e(this.name,t)},e}(o.a);e.a=y},224:function(t,e,n){"use strict";function r(){return new y}function i(){return new y([o.a.none(),o.a.none()])}var o=n(219);e.a=r,e.c=i;var y=function(){function t(t){void 0===t&&(t=[]),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.preMultiply(e.dim(i),n?n[i]:void 0)}),r},t.prototype.union=function(e,n){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.union(e.dim(i),n?n[i]:void 0)}),r},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return i();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.intersect(e.dim(i),n?n[i]:void 0)}),r},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return i();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.without(e.dim(i),n?n[i]:void 0)}),r},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,n){e.dims[n]=t.clone()}),e},t.prototype.swap=function(){return new t(this.dims.map(function(t){return t.clone()}).reverse())},t.prototype.filter=function(t,e){if(this.isAll)return t;var n=this.ndim,r=this,i=function(t){if(t>=n)return function(t){return t};var o=r.dim(t),y=i(t+1),s=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,s,y):t}};return i(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=o.a.all(),this.dims[t])},t.prototype.invert=function(t,e){var n=this;return this.isAll?t:t.map(function(t,r){return n.dim(r).invert(t,e?e[r]:void 0)})},t.prototype.indexRangeOf=function(e,n){return e.isNone||this.isNone?i():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,r){return t.indexRangeOf(e.dim(r),n?n[r]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var n;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);n=arguments[0]}else n=Array.from(arguments);return 0===n.length?[]:n.map(function(t,n){return e.dim(n).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,n){return e.size(t?t[n]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var n=this,r=this.ndim,i=function(o){var y=o.length;if(y<r){n.dims[y].iter(e?e[y]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}();e.b=y},225:function(t,e,n){"use strict";var r=n(24),i=n(219),o=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.name=e,i.color=n,i}return r.a(e,t),e.prototype.preMultiply=function(n,r){var i=t.prototype.preMultiply.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.union=function(n,r){var i=t.prototype.union.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.intersect=function(n,r){var i=t.prototype.intersect.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.without=function(n,r){var i=t.prototype.without.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(n){return new e(this.name,this.color,t.prototype.toSet.call(this,n))},e.prototype.fromLike=function(n){return new e(this.name,this.color,t.prototype.fromLike.call(this,n))},e}(i.a);e.a=o},228:function(t,e,n){"use strict";var r=n(229),i=n(222),o=n(233),y=function(){function t(t,e,n){if(void 0===e&&(e=-1),void 0===n&&(n=1),this.from=t,this.to=e,this.step=n,0===n)throw new Error("invalid step size: "+n)}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new o.a(t)},t.range=function(e,n,r){return void 0===n&&(n=-1),void 0===r&&(r=1),e+r===n?t.single(e):new t(e,n,r)},t.prototype.size=function(t){var e=n.i(r.a)(this.to,t),i=n.i(r.a)(this.from,t);if(1===this.step)return Math.max(e-i,0);if(-1===this.step)return-1===this.to?Math.max(i- -1,0):Math.max(i-e,0);var o=this.step>0?e-i+1:i-e+1,y=Math.abs(this.step);return o<=0?0:Math.floor(o/y)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){if(this.step>0){var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)}var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:n.i(r.a)(this.from,e)+t*this.step},t.prototype.iter=function(t){return this.step<0&&-1===this.to?n.i(i.d)(n.i(r.a)(this.from,t),-1,this.step):n.i(i.d)(n.i(r.a)(this.from,t),n.i(r.a)(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){if(this.isAll)return!0;var i=n.i(r.a)(this.from,e),o=n.i(r.a)(this.to,e);return-1===this.step?-1===this.to?t<=i&&t>=0:t<=i&&t>o:1===this.step?t>=i&&t<o:this.iter(e).asList().indexOf(t)>=0},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var n=function(t,e){if(void 0===e&&(e=NaN),""===(t=t.trim())&&!isNaN(e))return e;var n=parseInt(t,10);if(isNaN(n))throw Error('parse error: "'+t+'" is not a valid integer');return n},r=e.split(":");switch(r.length){case 1:return t.single(n(r[0]));case 2:return new t(n(r[0],0),n(r[1],-1));case 3:return new t(n(r[0],0),n(r[1],-1),n(r[2],1));default:throw new Error('parse error: "'+e+'" is not a valid range specifier')}},t}();e.a=y},229:function(t,e,n){"use strict";function r(t,e){return t<0?e+1+t:t}e.a=r},233:function(t,e,n){"use strict";var r=n(229),i=n(222),o=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return n.i(r.a)(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return n.i(r.a)(this.from,e)+t},t.prototype.iter=function(t){return n.i(i.e)(n.i(r.a)(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}();e.a=o},234:function(t,e,n){"use strict";function r(t){var e,n,r=[],a=0;for(t=t.trim();a<t.length;)switch(e=t.charAt(a)){case'"':n=i(t,a),a=n.act+1,r.push(n.dim);break;case",":a++,r.push(s.a.all());break;default:e.match(/\s/)?a++:(n=o(t,a),a=n.act+1,r.push(n.dim))}return","===t.charAt(t.length-1)&&r.push(s.a.all()),new y.b(r)}function i(t,e){e+=1;var n,r=t.indexOf('"',e),y=t.slice(e,r);switch(e=r+1,t.charAt(e)){case'"':return r=t.indexOf('"',e+1),n=o(t,r+1),{dim:new a.a(y,t.slice(e+1,r),n.dim),act:n.act};case"{":for(var u=[];"}"!==t.charAt(e);)n=i(t,e+1),u.push(n.dim),e=n.act;return{dim:new x.a(y,u),act:n.act+1};default:return{dim:s.a.all(),act:e}}}function o(t,e){var n,r;switch(t.charAt(e)){case",":case"}":n=e,r=s.a.all();break;case"(":r=new s.a,n=t.indexOf(")",e),n>e+1&&r.push.apply(r,t.slice(e+1,n).split(",").map(u.a.parse)),n+=1;break;default:n=t.indexOf("}",e);var i=t.indexOf(",",e);n>=0&&i>=0?n=Math.min(n,i):n<0&&(n=i),n<0&&(n=t.length),r=new s.a([u.a.parse(t.slice(e,n))])}return{act:n,dim:r}}var y=n(224),s=n(219),a=n(225),u=n(228),x=n(223);e.a=r},240:function(t,e,n){"use strict";function r(t,e){return{name:t,params:e}}function i(t,e){return void 0===e&&(e=Number.NaN),"number"==typeof t?new s(t,e):new s(t.x,t.y)}var o=n(24);n.d(e,"c",function(){return y}),e.b=i,n.d(e,"a",function(){return s});var y=function(){function t(t){void 0===t&&(t="No Intersection"),this.status=t,this.points=[]}return Object.defineProperty(t.prototype,"intersects",{get:function(){return"Intersection"===this.status},enumerable:!0,configurable:!0}),t.prototype.appendPoint=function(t){this.status="Intersection",this.points.push(t)},t.prototype.appendPoints=function(t){t.length>0&&(this.status="Intersection"),(e=this.points).push.apply(e,t);var e},Object.defineProperty(t.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){this.points.forEach(t,e)},t.prototype.map=function(t,e){return this.points.map(t,e)},t.intersectShapes=function(e,n){var r,i=e.asIntersectionParams(),o=n.asIntersectionParams();if(null!=i&&null!=o)if(e instanceof x)r=t.intersectPathShape(e,n);else if(n instanceof x)r=t.intersectPathShape(n,e);else{var y=void 0,s=void 0;i.name<o.name?(y="intersect"+i.name+o.name,s=i.params.concat(o.params)):(y="intersect"+o.name+i.name,s=o.params.concat(i.params));var a=t;if("function"!=typeof a[y])throw new Error("Intersection not available: "+y);r=a[y].apply(null,s)}else r=new t;return r},t.intersectPathShape=function(t,e){return t.intersectShape(e)},t.intersectBezier2Bezier2=function(e,n,r,i,o,y){var u=1e-4,x=new t,p=n.multiply(-2),c=e.add(p.add(r));p=e.multiply(-2);var h=n.multiply(2),f=p.add(h),l=new s(e.x,e.y);p=o.multiply(-2);var d=i.add(p.add(y));p=i.multiply(-2),h=o.multiply(2);for(var m=p.add(h),g=new s(i.x,i.y),v=c.x*f.y-f.x*c.y,b=d.x*f.y-f.x*d.y,w=m.x*f.y-f.x*m.y,P=f.x*(l.y-g.y)+f.y*(-l.x+g.x),O=d.x*c.y-c.x*d.y,E=m.x*c.y-c.x*m.y,M=c.x*(l.y-g.y)+c.y*(-l.x+g.x),A=new a(-O*O,-2*O*E,v*b-E*E-2*O*M,v*w-2*E*M,v*P-M*M),L=A.getRoots(),N=0,j=L;N<j.length;N++){var I=j[N];if(0<=I&&I<=1){var R=new a(-c.x,-f.x,-l.x+g.x+I*m.x+I*I*d.x).getRoots(),S=new a(-c.y,-f.y,-l.y+g.y+I*m.y+I*I*d.y).getRoots();if(R.length>0&&S.length>0)t:for(var C=0,z=R;C<z.length;C++){var k=z[C];if(0<=k&&k<=1)for(var B=0,q=S;B<q.length;B++){var D=q[B];if(Math.abs(k-D)<u){x.points.push(d.multiply(I*I).add(m.multiply(I).add(g)));break t}}}}}return x},t.intersectBezier2Bezier3=function(e,n,r,i,o,y,u){var x,p,c,h,f,l,d,m,g,v,b,w=new t;x=n.multiply(-2),f=e.add(x.add(r)),x=e.multiply(-2),p=n.multiply(2),l=x.add(p),d=new s(e.x,e.y),x=i.multiply(-1),p=o.multiply(3),c=y.multiply(-3),h=x.add(p.add(c.add(u))),m=new s(h.x,h.y),x=i.multiply(3),p=o.multiply(-6),c=y.multiply(3),h=x.add(p.add(c)),g=new s(h.x,h.y),x=i.multiply(-3),p=o.multiply(3),c=x.add(p),v=new s(c.x,c.y),b=new s(i.x,i.y);for(var P=d.x*d.x,O=d.y*d.y,E=l.x*l.x,M=l.y*l.y,A=f.x*f.x,L=f.y*f.y,N=b.x*b.x,j=b.y*b.y,I=v.x*v.x,R=v.y*v.y,S=g.x*g.x,C=g.y*g.y,z=m.x*m.x,k=m.y*m.y,B=new a(-2*f.x*f.y*m.x*m.y+A*k+L*z,-2*f.x*f.y*g.x*m.y-2*f.x*f.y*g.y*m.x+2*L*g.x*m.x+2*A*g.y*m.y,-2*f.x*v.x*f.y*m.y-2*f.x*f.y*v.y*m.x-2*f.x*f.y*g.x*g.y+2*v.x*L*m.x+L*S+A*(2*v.y*m.y+C),2*d.x*f.x*f.y*m.y+2*d.y*f.x*f.y*m.x+l.x*l.y*f.x*m.y+l.x*l.y*f.y*m.x-2*b.x*f.x*f.y*m.y-2*f.x*b.y*f.y*m.x-2*f.x*v.x*f.y*g.y-2*f.x*f.y*v.y*g.x-2*d.x*L*m.x-2*d.y*A*m.y+2*b.x*L*m.x+2*v.x*L*g.x-M*f.x*m.x-E*f.y*m.y+A*(2*b.y*m.y+2*v.y*g.y),2*d.x*f.x*f.y*g.y+2*d.y*f.x*f.y*g.x+l.x*l.y*f.x*g.y+l.x*l.y*f.y*g.x-2*b.x*f.x*f.y*g.y-2*f.x*b.y*f.y*g.x-2*f.x*v.x*f.y*v.y-2*d.x*L*g.x-2*d.y*A*g.y+2*b.x*L*g.x-M*f.x*g.x-E*f.y*g.y+I*L+A*(2*b.y*g.y+R),2*d.x*f.x*f.y*v.y+2*d.y*f.x*v.x*f.y+l.x*l.y*f.x*v.y+l.x*l.y*v.x*f.y-2*b.x*f.x*f.y*v.y-2*f.x*b.y*v.x*f.y-2*d.x*v.x*L-2*d.y*A*v.y+2*b.x*v.x*L-M*f.x*v.x-E*f.y*v.y+2*A*b.y*v.y,-2*d.x*d.y*f.x*f.y-d.x*l.x*l.y*f.y-d.y*l.x*l.y*f.x+2*d.x*f.x*b.y*f.y+2*d.y*b.x*f.x*f.y+l.x*b.x*l.y*f.y+l.x*l.y*f.x*b.y-2*b.x*f.x*b.y*f.y-2*d.x*b.x*L+d.x*M*f.x+d.y*E*f.y-2*d.y*A*b.y-b.x*M*f.x-E*b.y*f.y+P*L+O*A+N*L+A*j),q=B.getRootsInInterval(0,1),D=0,T=q;D<T.length;D++){var F=T[D],_=new a(f.x,l.x,d.x-b.x-F*v.x-F*F*g.x-F*F*F*m.x).getRoots(),Y=new a(f.y,l.y,d.y-b.y-F*v.y-F*F*g.y-F*F*F*m.y).getRoots();if(_.length>0&&Y.length>0){t:for(var U=0,X=_;U<X.length;U++){var Q=X[U];if(0<=Q&&Q<=1)for(var $=0,V=Y;$<V.length;$++){var W=V[$];if(Math.abs(Q-W)<1e-4){w.points.push(m.multiply(F*F*F).add(g.multiply(F*F).add(v.multiply(F).add(b))));break t}}}}}return w},t.intersectBezier2Circle=function(e,n,r,i,o){return t.intersectBezier2Ellipse(e,n,r,i,o,o)},t.intersectBezier2Ellipse=function(e,n,r,i,o,y){var u,x,p,c,h,f=new t;u=n.multiply(-2),p=e.add(u.add(r)),u=e.multiply(-2),x=n.multiply(2),c=u.add(x),h=new s(e.x,e.y);for(var l=o*o,d=y*y,m=new a(d*p.x*p.x+l*p.y*p.y,2*(d*p.x*c.x+l*p.y*c.y),d*(2*p.x*h.x+c.x*c.x)+l*(2*p.y*h.y+c.y*c.y)-2*(d*i.x*p.x+l*i.y*p.y),2*(d*c.x*(h.x-i.x)+l*c.y*(h.y-i.y)),d*(h.x*h.x+i.x*i.x)+l*(h.y*h.y+i.y*i.y)-2*(d*i.x*h.x+l*i.y*h.y)-l*d).getRoots(),g=0,v=m;g<v.length;g++){var b=v[g];0<=b&&b<=1&&f.points.push(p.multiply(b*b).add(c.multiply(b).add(h)))}return f},t.intersectBezier2Line=function(e,n,r,i,o){var y,u,x,p,c,h,f,l=i.min(o),d=i.max(o),m=new t;y=n.multiply(-2),x=e.add(y.add(r)),y=e.multiply(-2),u=n.multiply(2),p=y.add(u),c=new s(e.x,e.y),f=new s(i.y-o.y,o.x-i.x),h=i.x*o.y-o.x*i.y;for(var g=new a(f.dot(x),f.dot(p),f.dot(c)+h).getRoots(),v=0,b=g;v<b.length;v++){var w=b[v];if(0<=w&&w<=1){var P=e.lerp(n,w),O=n.lerp(r,w),E=P.lerp(O,w);i.x===o.x?l.y<=E.y&&E.y<=d.y&&m.appendPoint(E):i.y===o.y?l.x<=E.x&&E.x<=d.x&&m.appendPoint(E):E.gte(l)&&E.lte(d)&&m.appendPoint(E)}}return m},t.prototype.intersectBezier2Polygon=function(e,n,r,i){for(var o=new t,y=i.length,s=0;s<y;s++){var a=i[s],u=i[(s+1)%y],x=t.intersectBezier2Line(e,n,r,a,u);o.appendPoints(x.points)}return o},t.intersectBezier2Rectangle=function(e,n,r,i,o){var y=i.min(o),a=i.max(o),u=new s(a.x,y.y),x=new s(y.x,a.y),p=t.intersectBezier2Line(e,n,r,y,u),c=t.intersectBezier2Line(e,n,r,u,a),h=t.intersectBezier2Line(e,n,r,a,x),f=t.intersectBezier2Line(e,n,r,x,y),l=new t;return l.appendPoints(p.points),l.appendPoints(c.points),l.appendPoints(h.points),l.appendPoints(f.points),l},t.intersectBezier3Bezier3=function(e,n,r,i,o,y,u,x){var p,c,h,f,l,d,m,g,v,b,w,P,O=new t;p=e.multiply(-1),c=n.multiply(3),h=r.multiply(-3),f=p.add(c.add(h.add(i))),l=new s(f.x,f.y),p=e.multiply(3),c=n.multiply(-6),h=r.multiply(3),f=p.add(c.add(h)),d=new s(f.x,f.y),p=e.multiply(-3),c=n.multiply(3),h=p.add(c),m=new s(h.x,h.y),g=new s(e.x,e.y),p=o.multiply(-1),c=y.multiply(3),h=u.multiply(-3),f=p.add(c.add(h.add(x))),v=new s(f.x,f.y),p=o.multiply(3),c=y.multiply(-6),h=u.multiply(3),f=p.add(c.add(h)),b=new s(f.x,f.y),p=o.multiply(-3),c=y.multiply(3),h=p.add(c),w=new s(h.x,h.y),P=new s(o.x,o.y);for(var E=g.x*g.x,M=g.x*g.x*g.x,A=g.y*g.y,L=g.y*g.y*g.y,N=m.x*m.x,j=m.x*m.x*m.x,I=m.y*m.y,R=m.y*m.y*m.y,S=d.x*d.x,C=d.x*d.x*d.x,z=d.y*d.y,k=d.y*d.y*d.y,B=l.x*l.x,q=l.x*l.x*l.x,D=l.y*l.y,T=l.y*l.y*l.y,F=P.x*P.x,_=P.x*P.x*P.x,Y=P.y*P.y,U=P.y*P.y*P.y,X=w.x*w.x,Q=w.x*w.x*w.x,$=w.y*w.y,V=b.x*b.x,W=b.x*b.x*b.x,H=b.y*b.y,Z=v.x*v.x,G=v.x*v.x*v.x,J=v.y*v.y,K=v.y*v.y*v.y,tt=new a(-q*K+T*G-3*l.x*D*Z*v.y+3*B*l.y*v.x*J,-6*l.x*b.x*D*v.x*v.y+6*B*l.y*b.y*v.x*v.y+3*b.x*T*Z-3*q*b.y*J-3*l.x*D*b.y*Z+3*B*b.x*l.y*J,-6*w.x*l.x*D*v.x*v.y-6*l.x*b.x*D*b.y*v.x+6*B*b.x*l.y*b.y*v.y+3*w.x*T*Z+3*V*T*v.x+3*w.x*B*l.y*J-3*l.x*w.y*D*Z-3*l.x*V*D*v.y+B*l.y*v.x*(6*w.y*v.y+3*H)+q*(-w.y*J-2*H*v.y-v.y*(2*w.y*v.y+H)),m.x*d.y*l.x*l.y*v.x*v.y-m.y*d.x*l.x*l.y*v.x*v.y+6*w.x*b.x*T*v.x+3*m.x*d.x*l.x*l.y*J+6*g.x*l.x*D*v.x*v.y-3*m.x*d.x*D*v.x*v.y-3*m.y*d.y*l.x*l.y*Z-6*g.y*B*l.y*v.x*v.y-6*P.x*l.x*D*v.x*v.y+3*m.y*d.y*B*v.x*v.y-2*d.x*z*l.x*v.x*v.y-6*w.x*l.x*b.x*D*v.y-6*w.x*l.x*D*b.y*v.x-6*l.x*w.y*b.x*D*v.x+6*w.x*B*l.y*b.y*v.y+2*S*d.y*l.y*v.x*v.y+W*T-3*g.x*T*Z+3*g.y*q*J+3*P.x*T*Z+k*l.x*Z-C*l.y*J-3*g.x*B*l.y*J+3*g.y*l.x*D*Z-2*m.x*d.y*B*J+m.x*d.y*D*Z-m.y*d.x*B*J+2*m.y*d.x*D*Z+3*P.x*B*l.y*J-d.x*z*l.y*Z-3*P.y*l.x*D*Z+S*d.y*l.x*J-3*l.x*V*D*b.y+B*l.y*v.x*(6*P.y*v.y+6*w.y*b.y)+B*b.x*l.y*(6*w.y*v.y+3*H)+q*(-2*w.y*b.y*v.y-P.y*J-b.y*(2*w.y*v.y+H)-v.y*(2*P.y*v.y+2*w.y*b.y)),6*m.x*d.x*l.x*l.y*b.y*v.y+m.x*d.y*l.x*b.x*l.y*v.y+m.x*d.y*l.x*l.y*b.y*v.x-m.y*d.x*l.x*b.x*l.y*v.y-m.y*d.x*l.x*l.y*b.y*v.x-6*m.y*d.y*l.x*b.x*l.y*v.x-6*g.x*b.x*T*v.x+6*P.x*b.x*T*v.x+6*g.y*q*b.y*v.y+2*k*l.x*b.x*v.x-2*C*l.y*b.y*v.y+6*g.x*l.x*b.x*D*v.y+6*g.x*l.x*D*b.y*v.x+6*g.y*l.x*b.x*D*v.x-3*m.x*d.x*b.x*D*v.y-3*m.x*d.x*D*b.y*v.x+2*m.x*d.y*b.x*D*v.x+4*m.y*d.x*b.x*D*v.x-6*g.x*B*l.y*b.y*v.y-6*g.y*B*b.x*l.y*v.y-6*g.y*B*l.y*b.y*v.x-4*m.x*d.y*B*b.y*v.y-6*P.x*l.x*b.x*D*v.y-6*P.x*l.x*D*b.y*v.x-2*m.y*d.x*B*b.y*v.y+3*m.y*d.y*B*b.x*v.y+3*m.y*d.y*B*b.y*v.x-2*d.x*z*l.x*b.x*v.y-2*d.x*z*l.x*b.y*v.x-2*d.x*z*b.x*l.y*v.x-6*P.y*l.x*b.x*D*v.x-6*w.x*l.x*w.y*D*v.x-6*w.x*l.x*b.x*D*b.y+6*P.x*B*l.y*b.y*v.y+2*S*d.y*l.x*b.y*v.y+2*S*d.y*b.x*l.y*v.y+2*S*d.y*l.y*b.y*v.x+3*w.x*V*T+3*X*T*v.x-3*l.x*w.y*V*D-3*X*l.x*D*v.y+B*b.x*l.y*(6*P.y*v.y+6*w.y*b.y)+B*l.y*v.x*(6*P.y*b.y+3*$)+w.x*B*l.y*(6*w.y*v.y+3*H)+q*(-2*P.y*b.y*v.y-v.y*(2*P.y*b.y+$)-w.y*(2*w.y*v.y+H)-b.y*(2*P.y*v.y+2*w.y*b.y)),m.x*w.x*d.y*l.x*l.y*v.y+m.x*d.y*l.x*w.y*l.y*v.x+m.x*d.y*l.x*b.x*l.y*b.y-m.y*d.x*w.x*l.x*l.y*v.y-m.y*d.x*l.x*w.y*l.y*v.x-m.y*d.x*l.x*b.x*l.y*b.y-6*m.y*w.x*d.y*l.x*l.y*v.x-6*g.x*w.x*T*v.x+6*P.x*w.x*T*v.x+2*w.x*k*l.x*v.x+6*g.x*w.x*l.x*D*v.y+6*g.x*l.x*w.y*D*v.x+6*g.x*l.x*b.x*D*b.y+6*g.y*w.x*l.x*D*v.x-3*m.x*d.x*w.x*D*v.y-3*m.x*d.x*w.y*D*v.x-3*m.x*d.x*b.x*D*b.y+2*m.x*w.x*d.y*D*v.x+4*m.y*d.x*w.x*D*v.x-6*g.y*w.x*B*l.y*v.y-6*g.y*B*w.y*l.y*v.x-6*g.y*B*b.x*l.y*b.y-6*P.x*w.x*l.x*D*v.y-6*P.x*l.x*w.y*D*v.x-6*P.x*l.x*b.x*D*b.y+3*m.y*w.x*d.y*B*v.y-3*m.y*d.y*l.x*V*l.y+3*m.y*d.y*B*w.y*v.x+3*m.y*d.y*B*b.x*b.y-2*d.x*w.x*z*l.x*v.y-2*d.x*w.x*z*l.y*v.x-2*d.x*z*l.x*w.y*v.x-2*d.x*z*l.x*b.x*b.y-6*P.y*w.x*l.x*D*v.x-6*w.x*l.x*w.y*b.x*D+6*P.y*B*w.y*l.y*v.x+2*S*w.x*d.y*l.y*v.y+2*S*d.y*w.y*l.y*v.x+2*S*d.y*b.x*l.y*b.y-3*g.x*V*T+3*P.x*V*T+3*X*b.x*T+k*l.x*V+3*g.y*l.x*V*D+m.x*d.y*V*D+2*m.y*d.x*V*D-d.x*z*V*l.y-3*P.y*l.x*V*D-3*X*l.x*D*b.y+S*d.y*l.x*(2*w.y*v.y+H)+m.x*d.x*l.x*l.y*(6*w.y*v.y+3*H)+w.x*B*l.y*(6*P.y*v.y+6*w.y*b.y)+C*l.y*(-2*w.y*v.y-H)+g.y*q*(6*w.y*v.y+3*H)+m.y*d.x*B*(-2*w.y*v.y-H)+m.x*d.y*B*(-4*w.y*v.y-2*H)+g.x*B*l.y*(-6*w.y*v.y-3*H)+B*b.x*l.y*(6*P.y*b.y+3*$)+P.x*B*l.y*(6*w.y*v.y+3*H)+q*(-2*P.y*w.y*v.y-b.y*(2*P.y*b.y+$)-P.y*(2*w.y*v.y+H)-w.y*(2*P.y*v.y+2*w.y*b.y)),-g.x*m.x*d.y*l.x*l.y*v.y+g.x*m.y*d.x*l.x*l.y*v.y+6*g.x*m.y*d.y*l.x*l.y*v.x-6*g.y*m.x*d.x*l.x*l.y*v.y-g.y*m.x*d.y*l.x*l.y*v.x+g.y*m.y*d.x*l.x*l.y*v.x+m.x*m.y*d.x*d.y*l.x*v.y-m.x*m.y*d.x*d.y*l.y*v.x+m.x*P.x*d.y*l.x*l.y*v.y+m.x*P.y*d.y*l.x*l.y*v.x+m.x*w.x*d.y*l.x*l.y*b.y+m.x*d.y*l.x*w.y*b.x*l.y-P.x*m.y*d.x*l.x*l.y*v.y-6*P.x*m.y*d.y*l.x*l.y*v.x-m.y*d.x*P.y*l.x*l.y*v.x-m.y*d.x*w.x*l.x*l.y*b.y-m.y*d.x*l.x*w.y*b.x*l.y-6*m.y*w.x*d.y*l.x*b.x*l.y-6*g.x*P.x*T*v.x-6*g.x*w.x*b.x*T-2*g.x*k*l.x*v.x+6*P.x*w.x*b.x*T+2*P.x*k*l.x*v.x+2*w.x*k*l.x*b.x+2*g.y*C*l.y*v.y-6*g.x*g.y*l.x*D*v.x+3*g.x*m.x*d.x*D*v.y-2*g.x*m.x*d.y*D*v.x-4*g.x*m.y*d.x*D*v.x+3*g.y*m.x*d.x*D*v.x+6*g.x*g.y*B*l.y*v.y+6*g.x*P.x*l.x*D*v.y-3*g.x*m.y*d.y*B*v.y+2*g.x*d.x*z*l.x*v.y+2*g.x*d.x*z*l.y*v.x+6*g.x*P.y*l.x*D*v.x+6*g.x*w.x*l.x*D*b.y+6*g.x*l.x*w.y*b.x*D+4*g.y*m.x*d.y*B*v.y+6*g.y*P.x*l.x*D*v.x+2*g.y*m.y*d.x*B*v.y-3*g.y*m.y*d.y*B*v.x+2*g.y*d.x*z*l.x*v.x+6*g.y*w.x*l.x*b.x*D-3*m.x*P.x*d.x*D*v.y+2*m.x*P.x*d.y*D*v.x+m.x*m.y*z*l.x*v.x-3*m.x*d.x*P.y*D*v.x-3*m.x*d.x*w.x*D*b.y-3*m.x*d.x*w.y*b.x*D+2*m.x*w.x*d.y*b.x*D+4*P.x*m.y*d.x*D*v.x+4*m.y*d.x*w.x*b.x*D-2*g.x*S*d.y*l.y*v.y-6*g.y*P.x*B*l.y*v.y-6*g.y*P.y*B*l.y*v.x-6*g.y*w.x*B*l.y*b.y-2*g.y*S*d.y*l.x*v.y-2*g.y*S*d.y*l.y*v.x-6*g.y*B*w.y*b.x*l.y-m.x*m.y*S*l.y*v.y-2*m.x*I*l.x*l.y*v.x+3*P.x*m.y*d.y*B*v.y-2*P.x*d.x*z*l.x*v.y-2*P.x*d.x*z*l.y*v.x-6*P.x*P.y*l.x*D*v.x-6*P.x*w.x*l.x*D*b.y-6*P.x*l.x*w.y*b.x*D+3*m.y*P.y*d.y*B*v.x+3*m.y*w.x*d.y*B*b.y+3*m.y*d.y*B*w.y*b.x-2*d.x*P.y*z*l.x*v.x-2*d.x*w.x*z*l.x*b.y-2*d.x*w.x*z*b.x*l.y-2*d.x*z*l.x*w.y*b.x-6*P.y*w.x*l.x*b.x*D-I*d.x*d.y*l.x*v.x+2*P.x*S*d.y*l.y*v.y+6*P.y*B*w.y*b.x*l.y+2*N*m.y*l.x*l.y*v.y+N*d.x*d.y*l.y*v.y+2*S*P.y*d.y*l.y*v.x+2*S*w.x*d.y*l.y*b.y+2*S*d.y*w.y*b.x*l.y+Q*T+3*E*T*v.x-3*A*q*v.y+3*F*T*v.x+R*B*v.x-j*D*v.y-m.x*I*B*v.y+N*m.y*D*v.x-3*E*l.x*D*v.y+3*A*B*l.y*v.x-N*z*l.x*v.y+I*S*l.y*v.x-3*X*l.x*w.y*D-3*F*l.x*D*v.y+3*Y*B*l.y*v.x+m.x*d.x*l.x*l.y*(6*P.y*v.y+6*w.y*b.y)+C*l.y*(-2*P.y*v.y-2*w.y*b.y)+g.y*q*(6*P.y*v.y+6*w.y*b.y)+m.y*d.x*B*(-2*P.y*v.y-2*w.y*b.y)+S*d.y*l.x*(2*P.y*v.y+2*w.y*b.y)+m.x*d.y*B*(-4*P.y*v.y-4*w.y*b.y)+g.x*B*l.y*(-6*P.y*v.y-6*w.y*b.y)+P.x*B*l.y*(6*P.y*v.y+6*w.y*b.y)+w.x*B*l.y*(6*P.y*b.y+3*$)+q*(-2*P.y*w.y*b.y-Y*v.y-w.y*(2*P.y*b.y+$)-P.y*(2*P.y*v.y+2*w.y*b.y)),-g.x*m.x*d.y*l.x*l.y*b.y+g.x*m.y*d.x*l.x*l.y*b.y+6*g.x*m.y*d.y*l.x*b.x*l.y-6*g.y*m.x*d.x*l.x*l.y*b.y-g.y*m.x*d.y*l.x*b.x*l.y+g.y*m.y*d.x*l.x*b.x*l.y+m.x*m.y*d.x*d.y*l.x*b.y-m.x*m.y*d.x*d.y*b.x*l.y+m.x*P.x*d.y*l.x*l.y*b.y+m.x*P.y*d.y*l.x*b.x*l.y+m.x*w.x*d.y*l.x*w.y*l.y-P.x*m.y*d.x*l.x*l.y*b.y-6*P.x*m.y*d.y*l.x*b.x*l.y-m.y*d.x*P.y*l.x*b.x*l.y-m.y*d.x*w.x*l.x*w.y*l.y-6*g.x*P.x*b.x*T-2*g.x*k*l.x*b.x+2*P.x*k*l.x*b.x+2*g.y*C*l.y*b.y-6*g.x*g.y*l.x*b.x*D+3*g.x*m.x*d.x*D*b.y-2*g.x*m.x*d.y*b.x*D-4*g.x*m.y*d.x*b.x*D+3*g.y*m.x*d.x*b.x*D+6*g.x*g.y*B*l.y*b.y+6*g.x*P.x*l.x*D*b.y-3*g.x*m.y*d.y*B*b.y+2*g.x*d.x*z*l.x*b.y+2*g.x*d.x*z*b.x*l.y+6*g.x*P.y*l.x*b.x*D+6*g.x*w.x*l.x*w.y*D+4*g.y*m.x*d.y*B*b.y+6*g.y*P.x*l.x*b.x*D+2*g.y*m.y*d.x*B*b.y-3*g.y*m.y*d.y*B*b.x+2*g.y*d.x*z*l.x*b.x-3*m.x*P.x*d.x*D*b.y+2*m.x*P.x*d.y*b.x*D+m.x*m.y*z*l.x*b.x-3*m.x*d.x*P.y*b.x*D-3*m.x*d.x*w.x*w.y*D+4*P.x*m.y*d.x*b.x*D-2*g.x*S*d.y*l.y*b.y-6*g.y*P.x*B*l.y*b.y-6*g.y*P.y*B*b.x*l.y-6*g.y*w.x*B*w.y*l.y-2*g.y*S*d.y*l.x*b.y-2*g.y*S*d.y*b.x*l.y-m.x*m.y*S*l.y*b.y-2*m.x*I*l.x*b.x*l.y+3*P.x*m.y*d.y*B*b.y-2*P.x*d.x*z*l.x*b.y-2*P.x*d.x*z*b.x*l.y-6*P.x*P.y*l.x*b.x*D-6*P.x*w.x*l.x*w.y*D+3*m.y*P.y*d.y*B*b.x+3*m.y*w.x*d.y*B*w.y-2*d.x*P.y*z*l.x*b.x-2*d.x*w.x*z*l.x*w.y-I*d.x*d.y*l.x*b.x+2*P.x*S*d.y*l.y*b.y-3*m.y*X*d.y*l.x*l.y+6*P.y*w.x*B*w.y*l.y+2*N*m.y*l.x*l.y*b.y+N*d.x*d.y*l.y*b.y+2*S*P.y*d.y*b.x*l.y+2*S*w.x*d.y*w.y*l.y-3*g.x*X*T+3*P.x*X*T+3*E*b.x*T-3*A*q*b.y+3*F*b.x*T+X*k*l.x+R*B*b.x-j*D*b.y+3*g.y*X*l.x*D-m.x*I*B*b.y+m.x*X*d.y*D+2*m.y*d.x*X*D+N*m.y*b.x*D-d.x*X*z*l.y-3*P.y*X*l.x*D-3*E*l.x*D*b.y+3*A*B*b.x*l.y-N*z*l.x*b.y+I*S*b.x*l.y-3*F*l.x*D*b.y+3*Y*B*b.x*l.y+S*d.y*l.x*(2*P.y*b.y+$)+m.x*d.x*l.x*l.y*(6*P.y*b.y+3*$)+C*l.y*(-2*P.y*b.y-$)+g.y*q*(6*P.y*b.y+3*$)+m.y*d.x*B*(-2*P.y*b.y-$)+m.x*d.y*B*(-4*P.y*b.y-2*$)+g.x*B*l.y*(-6*P.y*b.y-3*$)+P.x*B*l.y*(6*P.y*b.y+3*$)+q*(-2*P.y*$-Y*b.y-P.y*(2*P.y*b.y+$)),-g.x*m.x*d.y*l.x*w.y*l.y+g.x*m.y*d.x*l.x*w.y*l.y+6*g.x*m.y*w.x*d.y*l.x*l.y-6*g.y*m.x*d.x*l.x*w.y*l.y-g.y*m.x*w.x*d.y*l.x*l.y+g.y*m.y*d.x*w.x*l.x*l.y-m.x*m.y*d.x*w.x*d.y*l.y+m.x*m.y*d.x*d.y*l.x*w.y+m.x*P.x*d.y*l.x*w.y*l.y+6*m.x*d.x*P.y*l.x*w.y*l.y+m.x*P.y*w.x*d.y*l.x*l.y-P.x*m.y*d.x*l.x*w.y*l.y-6*P.x*m.y*w.x*d.y*l.x*l.y-m.y*d.x*P.y*w.x*l.x*l.y-6*g.x*P.x*w.x*T-2*g.x*w.x*k*l.x+6*g.y*P.y*q*w.y+2*P.x*w.x*k*l.x+2*g.y*C*w.y*l.y-2*C*P.y*w.y*l.y-6*g.x*g.y*w.x*l.x*D+3*g.x*m.x*d.x*w.y*D-2*g.x*m.x*w.x*d.y*D-4*g.x*m.y*d.x*w.x*D+3*g.y*m.x*d.x*w.x*D+6*g.x*g.y*B*w.y*l.y+6*g.x*P.x*l.x*w.y*D-3*g.x*m.y*d.y*B*w.y+2*g.x*d.x*w.x*z*l.y+2*g.x*d.x*z*l.x*w.y+6*g.x*P.y*w.x*l.x*D+4*g.y*m.x*d.y*B*w.y+6*g.y*P.x*w.x*l.x*D+2*g.y*m.y*d.x*B*w.y-3*g.y*m.y*w.x*d.y*B+2*g.y*d.x*w.x*z*l.x-3*m.x*P.x*d.x*w.y*D+2*m.x*P.x*w.x*d.y*D+m.x*m.y*w.x*z*l.x-3*m.x*d.x*P.y*w.x*D+4*P.x*m.y*d.x*w.x*D-6*g.x*P.y*B*w.y*l.y-2*g.x*S*d.y*w.y*l.y-6*g.y*P.x*B*w.y*l.y-6*g.y*P.y*w.x*B*l.y-2*g.y*S*w.x*d.y*l.y-2*g.y*S*d.y*l.x*w.y-m.x*m.y*S*w.y*l.y-4*m.x*P.y*d.y*B*w.y-2*m.x*I*w.x*l.x*l.y+3*P.x*m.y*d.y*B*w.y-2*P.x*d.x*w.x*z*l.y-2*P.x*d.x*z*l.x*w.y-6*P.x*P.y*w.x*l.x*D-2*m.y*d.x*P.y*B*w.y+3*m.y*P.y*w.x*d.y*B-2*d.x*P.y*w.x*z*l.x-I*d.x*w.x*d.y*l.x+6*P.x*P.y*B*w.y*l.y+2*P.x*S*d.y*w.y*l.y+2*N*m.y*l.x*w.y*l.y+N*d.x*d.y*w.y*l.y+2*S*P.y*w.x*d.y*l.y+2*S*P.y*d.y*l.x*w.y+3*E*w.x*T-3*A*q*w.y+3*F*w.x*T+R*w.x*B-j*w.y*D-3*Y*q*w.y-m.x*I*B*w.y+N*m.y*w.x*D-3*E*l.x*w.y*D+3*A*w.x*B*l.y-N*z*l.x*w.y+I*S*w.x*l.y-3*F*l.x*w.y*D+3*Y*w.x*B*l.y,g.x*g.y*m.x*d.y*l.x*l.y-g.x*g.y*m.y*d.x*l.x*l.y+g.x*m.x*m.y*d.x*d.y*l.y-g.y*m.x*m.y*d.x*d.y*l.x-g.x*m.x*P.y*d.y*l.x*l.y+6*g.x*P.x*m.y*d.y*l.x*l.y+g.x*m.y*d.x*P.y*l.x*l.y-g.y*m.x*P.x*d.y*l.x*l.y-6*g.y*m.x*d.x*P.y*l.x*l.y+g.y*P.x*m.y*d.x*l.x*l.y-m.x*P.x*m.y*d.x*d.y*l.y+m.x*m.y*d.x*P.y*d.y*l.x+m.x*P.x*P.y*d.y*l.x*l.y-P.x*m.y*d.x*P.y*l.x*l.y-2*g.x*P.x*k*l.x+2*g.y*C*P.y*l.y-3*g.x*g.y*m.x*d.x*D-6*g.x*g.y*P.x*l.x*D+3*g.x*g.y*m.y*d.y*B-2*g.x*g.y*d.x*z*l.x-2*g.x*m.x*P.x*d.y*D-g.x*m.x*m.y*z*l.x+3*g.x*m.x*d.x*P.y*D-4*g.x*P.x*m.y*d.x*D+3*g.y*m.x*P.x*d.x*D+6*g.x*g.y*P.y*B*l.y+2*g.x*g.y*S*d.y*l.y+2*g.x*m.x*I*l.x*l.y+2*g.x*P.x*d.x*z*l.y+6*g.x*P.x*P.y*l.x*D-3*g.x*m.y*P.y*d.y*B+2*g.x*d.x*P.y*z*l.x+g.x*I*d.x*d.y*l.x+g.y*m.x*m.y*S*l.y+4*g.y*m.x*P.y*d.y*B-3*g.y*P.x*m.y*d.y*B+2*g.y*P.x*d.x*z*l.x+2*g.y*m.y*d.x*P.y*B+m.x*P.x*m.y*z*l.x-3*m.x*P.x*d.x*P.y*D-2*g.x*S*P.y*d.y*l.y-6*g.y*P.x*P.y*B*l.y-2*g.y*P.x*S*d.y*l.y-2*g.y*N*m.y*l.x*l.y-g.y*N*d.x*d.y*l.y-2*g.y*S*P.y*d.y*l.x-2*m.x*P.x*I*l.x*l.y-m.x*m.y*S*P.y*l.y+3*P.x*m.y*P.y*d.y*B-2*P.x*d.x*P.y*z*l.x-P.x*I*d.x*d.y*l.x+3*A*m.x*d.x*l.x*l.y+3*m.x*d.x*Y*l.x*l.y+2*P.x*S*P.y*d.y*l.y-3*E*m.y*d.y*l.x*l.y+2*N*m.y*P.y*l.x*l.y+N*d.x*P.y*d.y*l.y-3*F*m.y*d.y*l.x*l.y-M*T+L*q+_*T-U*q-3*g.x*F*T-g.x*R*B+3*E*P.x*T+g.y*j*D+3*g.y*Y*q+P.x*R*B+E*k*l.x-3*A*P.y*q-A*C*l.y+F*k*l.x-j*P.y*D-C*Y*l.y-g.x*N*m.y*D+g.y*m.x*I*B-3*g.x*A*B*l.y-g.x*I*S*l.y+g.y*N*z*l.x-m.x*I*P.y*B+3*E*g.y*l.x*D+E*m.x*d.y*D+2*E*m.y*d.x*D-2*A*m.x*d.y*B-A*m.y*d.x*B+N*P.x*m.y*D-3*g.x*Y*B*l.y+3*g.y*F*l.x*D+m.x*F*d.y*D-2*m.x*Y*d.y*B+P.x*I*S*l.y-m.y*d.x*Y*B-E*d.x*z*l.y-3*E*P.y*l.x*D+3*A*P.x*B*l.y+A*S*d.y*l.x-N*P.y*z*l.x+2*F*m.y*d.x*D+3*P.x*Y*B*l.y-F*d.x*z*l.y-3*F*P.y*l.x*D+S*Y*d.y*l.x),et=tt.getRootsInInterval(0,1),nt=0,rt=et;nt<rt.length;nt++){var it=rt[nt],ot=new a(l.x,d.x,m.x,g.x-P.x-it*w.x-it*it*b.x-it*it*it*v.x).getRoots(),yt=new a(l.y,d.y,m.y,g.y-P.y-it*w.y-it*it*b.y-it*it*it*v.y).getRoots();if(ot.length>0&&yt.length>0){t:for(var st=0,at=ot;st<at.length;st++){var ut=at[st];if(0<=ut&&ut<=1)for(var xt=0,pt=yt;xt<pt.length;xt++){var ct=pt[xt];if(Math.abs(ut-ct)<1e-4){O.points.push(v.multiply(it*it*it).add(b.multiply(it*it).add(w.multiply(it).add(P))));break t}}}}}return O},t.intersectBezier3Circle=function(e,n,r,i,o,y){return t.intersectBezier3Ellipse(e,n,r,i,o,y,y)},t.intersectBezier3Ellipse=function(e,n,r,i,o,y,u){var x,p,c,h,f,l,d,m,g=new t;x=e.multiply(-1),p=n.multiply(3),c=r.multiply(-3),h=x.add(p.add(c.add(i))),f=new s(h.x,h.y),x=e.multiply(3),p=n.multiply(-6),c=r.multiply(3),h=x.add(p.add(c)),l=new s(h.x,h.y),x=e.multiply(-3),p=n.multiply(3),c=x.add(p),d=new s(c.x,c.y),m=new s(e.x,e.y);for(var v=y*y,b=u*u,w=new a(f.x*f.x*b+f.y*f.y*v,2*(f.x*l.x*b+f.y*l.y*v),2*(f.x*d.x*b+f.y*d.y*v)+l.x*l.x*b+l.y*l.y*v,2*f.x*b*(m.x-o.x)+2*f.y*v*(m.y-o.y)+2*(l.x*d.x*b+l.y*d.y*v),2*l.x*b*(m.x-o.x)+2*l.y*v*(m.y-o.y)+d.x*d.x*b+d.y*d.y*v,2*d.x*b*(m.x-o.x)+2*d.y*v*(m.y-o.y),m.x*m.x*b-2*m.y*o.y*v-2*m.x*o.x*b+m.y*m.y*v+o.x*o.x*b+o.y*o.y*v-v*b),P=w.getRootsInInterval(0,1),O=0,E=P;O<E.length;O++){var M=E[O];g.points.push(f.multiply(M*M*M).add(l.multiply(M*M).add(d.multiply(M).add(m))))}return g},t.intersectBezier3Line=function(e,n,r,i,o,y){var u,x,p,c,h,f,l,d,m,g,v=o.min(y),b=o.max(y),w=new t;u=e.multiply(-1),x=n.multiply(3),p=r.multiply(-3),c=u.add(x.add(p.add(i))),h=new s(c.x,c.y),u=e.multiply(3),x=n.multiply(-6),p=r.multiply(3),c=u.add(x.add(p)),f=new s(c.x,c.y),u=e.multiply(-3),x=n.multiply(3),p=u.add(x),l=new s(p.x,p.y),d=new s(e.x,e.y),g=new s(o.y-y.y,y.x-o.x),m=o.x*y.y-y.x*o.y;for(var P=new a(g.dot(h),g.dot(f),g.dot(l),g.dot(d)+m).getRoots(),O=0,E=P;O<E.length;O++){var M=E[O];if(0<=M&&M<=1){var A=e.lerp(n,M),L=n.lerp(r,M),N=r.lerp(i,M),j=A.lerp(L,M),I=L.lerp(N,M),R=j.lerp(I,M);o.x===y.x?v.y<=R.y&&R.y<=b.y&&w.appendPoint(R):o.y===y.y?v.x<=R.x&&R.x<=b.x&&w.appendPoint(R):R.gte(v)&&R.lte(b)&&w.appendPoint(R)}}return w},t.intersectBezier3Polygon=function(e,n,r,i,o){for(var y=new t,s=o.length,a=0;a<s;a++){var u=o[a],x=o[(a+1)%s],p=t.intersectBezier3Line(e,n,r,i,u,x);y.appendPoints(p.points)}return y},t.intersectBezier3Rectangle=function(e,n,r,i,o,y){var a=o.min(y),u=o.max(y),x=new s(u.x,a.y),p=new s(a.x,u.y),c=t.intersectBezier3Line(e,n,r,i,a,x),h=t.intersectBezier3Line(e,n,r,i,x,u),f=t.intersectBezier3Line(e,n,r,i,u,p),l=t.intersectBezier3Line(e,n,r,i,p,a),d=new t;return d.appendPoints(c.points),d.appendPoints(h.points),d.appendPoints(f.points),d.appendPoints(l.points),d},t.intersectCircleCircle=function(e,n,r,i){var o,y=n+i,a=Math.abs(n-i),u=e.distanceFrom(r);if(u>y)o=new t("Outside");else if(u<a)o=new t("Inside");else{o=new t("Intersection");var x=(n*n-i*i+u*u)/(2*u),p=Math.sqrt(n*n-x*x),c=e.lerp(r,x/u),h=p/u;o.points.push(new s(c.x-h*(r.y-e.y),c.y+h*(r.x-e.x))),o.points.push(new s(c.x+h*(r.y-e.y),c.y-h*(r.x-e.x)))}return o},t.intersectCircleEllipse=function(e,n,r,i,o){return t.intersectEllipseEllipse(e,n,n,r,i,o)},t.intersectCircleLine=function(e,n,r,i){var o,y=(i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y),s=2*((i.x-r.x)*(r.x-e.x)+(i.y-r.y)*(r.y-e.y)),a=e.x*e.x+e.y*e.y+r.x*r.x+r.y*r.y-2*(e.x*r.x+e.y*r.y)-n*n,u=s*s-4*y*a;if(u<0)o=new t("Outside");else if(0===u)o=new t("Tangent");else{var x=Math.sqrt(u),p=(-s+x)/(2*y),c=(-s-x)/(2*y);(p<0||p>1)&&(c<0||c>1)?o=new t(p<0&&c<0||p>1&&c>1?"Outside":"Inside"):(o=new t("Intersection"),0<=p&&p<=1&&o.points.push(r.lerp(i,p)),0<=c&&c<=1&&o.points.push(r.lerp(i,c)))}return o},t.intersectCirclePolygon=function(e,n,r){for(var i,o=new t,y=r.length,s=0;s<y;s++){var a=r[s],u=r[(s+1)%y];i=t.intersectCircleLine(e,n,a,u),o.appendPoints(i.points)}return o.points.length>0?o.status="Intersection":o.status=i.status,o},t.intersectCircleRectangle=function(e,n,r,i){var o=r.min(i),y=r.max(i),a=new s(y.x,o.y),u=new s(o.x,y.y),x=t.intersectCircleLine(e,n,o,a),p=t.intersectCircleLine(e,n,a,y),c=t.intersectCircleLine(e,n,y,u),h=t.intersectCircleLine(e,n,u,o),f=new t;return f.appendPoints(x.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f.points.length>0?f.status="Intersection":f.status=x.status,f},t.intersectEllipseEllipse=function(e,n,r,i,o,y){for(var u=[r*r,0,n*n,-2*r*r*e.x,-2*n*n*e.y,r*r*e.x*e.x+n*n*e.y*e.y-n*n*r*r],x=[y*y,0,o*o,-2*y*y*i.x,-2*o*o*i.y,y*y*i.x*i.x+o*o*i.y*i.y-o*o*y*y],p=t.bezout(u,x),c=p.getRoots(),h=.001,f=(u[0]*u[0]+2*u[1]*u[1]+u[2]*u[2])*h,l=(x[0]*x[0]+2*x[1]*x[1]+x[2]*x[2])*h,d=new t,m=0,g=c;m<g.length;m++)for(var v=g[m],b=new a(u[0],u[3]+v*u[1],u[5]+v*(u[4]+v*u[2])),w=b.getRoots(),P=0,O=w;P<O.length;P++){var E=O[P],M=(u[0]*E+u[1]*v+u[3])*E+(u[2]*v+u[4])*v+u[5];Math.abs(M)<f&&(M=(x[0]*E+x[1]*v+x[3])*E+(x[2]*v+x[4])*v+x[5],Math.abs(M)<l&&d.appendPoint(new s(E,v)))}return d},t.intersectEllipseLine=function(e,n,r,i,o){var y,a=new s(i.x,i.y),u=s.fromPoints(i,o),x=new s(e.x,e.y),p=a.subtract(x),c=new s(u.x/(n*n),u.y/(r*r)),h=new s(p.x/(n*n),p.y/(r*r)),f=u.dot(c),l=u.dot(h),d=p.dot(h)-1,m=l*l-f*d;if(m<0)y=new t("Outside");else if(m>0){var g=Math.sqrt(m),v=(-l-g)/f,b=(-l+g)/f;(v<0||1<v)&&(b<0||1<b)?y=new t(v<0&&b<0||v>1&&b>1?"Outside":"Inside"):(y=new t("Intersection"),0<=v&&v<=1&&y.appendPoint(i.lerp(o,v)),0<=b&&b<=1&&y.appendPoint(i.lerp(o,b)))}else{var w=-l/f;0<=w&&w<=1?(y=new t("Intersection"),y.appendPoint(i.lerp(o,w))):y=new t("Outside")}return y},t.intersectEllipsePolygon=function(e,n,r,i){for(var o=new t,y=i.length,s=0;s<y;s++){var a=i[s],u=i[(s+1)%y],x=t.intersectEllipseLine(e,n,r,a,u);o.appendPoints(x.points)}return o},t.intersectEllipseRectangle=function(e,n,r,i,o){var y=i.min(o),a=i.max(o),u=new s(a.x,y.y),x=new s(y.x,a.y),p=t.intersectEllipseLine(e,n,r,y,u),c=t.intersectEllipseLine(e,n,r,u,a),h=t.intersectEllipseLine(e,n,r,a,x),f=t.intersectEllipseLine(e,n,r,x,y),l=new t;return l.appendPoints(p.points),l.appendPoints(c.points),l.appendPoints(h.points),l.appendPoints(f.points),l},t.intersectLineLine=function(e,n,r,i){var o,y=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),a=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),u=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==u){var x=y/u,p=a/u;0<=x&&x<=1&&0<=p&&p<=1?(o=new t("Intersection"),o.points.push(new s(e.x+x*(n.x-e.x),e.y+x*(n.y-e.y)))):o=new t}else o=new t(0===y||0===a?"Coincident":"Parallel");return o},t.intersectLinePolygon=function(e,n,r){for(var i=new t,o=r.length,y=0;y<o;y++){var s=r[y],a=r[(y+1)%o],u=t.intersectLineLine(e,n,s,a);i.appendPoints(u.points)}return i},t.intersectLineRectangle=function(e,n,r,i){var o=r.min(i),y=r.max(i),a=new s(y.x,o.y),u=new s(o.x,y.y),x=t.intersectLineLine(o,a,e,n),p=t.intersectLineLine(a,y,e,n),c=t.intersectLineLine(y,u,e,n),h=t.intersectLineLine(u,o,e,n),f=new t;return f.appendPoints(x.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f},t.intersectPolygonPolygon=function(e,n){for(var r=new t,i=e.length,o=0;o<i;o++){var y=e[o],s=e[(o+1)%i],a=t.intersectLinePolygon(y,s,n);r.appendPoints(a.points)}return r},t.intersectPolygonRectangle=function(e,n,r){var i=n.min(r),o=n.max(r),y=new s(o.x,i.y),a=new s(i.x,o.y),u=t.intersectLinePolygon(i,y,e),x=t.intersectLinePolygon(y,o,e),p=t.intersectLinePolygon(o,a,e),c=t.intersectLinePolygon(a,i,e),h=new t;return h.appendPoints(u.points),h.appendPoints(x.points),h.appendPoints(p.points),h.appendPoints(c.points),h},t.intersectRayRay=function(e,n,r,i){var o,y=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),a=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),u=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==u){var x=y/u;o=new t("Intersection"),o.points.push(new s(e.x+x*(n.x-e.x),e.y+x*(n.y-e.y)))}else o=new t(0===y||0===a?"Coincident":"Parallel");return o},t.intersectRectangleRectangle=function(e,n,r,i){var o=e.min(n),y=e.max(n),a=new s(y.x,o.y),u=new s(o.x,y.y),x=t.intersectLineRectangle(o,a,r,i),p=t.intersectLineRectangle(a,y,r,i),c=t.intersectLineRectangle(y,u,r,i),h=t.intersectLineRectangle(u,o,r,i),f=new t;return f.appendPoints(x.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f},t.bezout=function(t,e){var n=t[0]*e[1]-e[0]*t[1],r=t[0]*e[2]-e[0]*t[2],i=t[0]*e[3]-e[0]*t[3],o=t[0]*e[4]-e[0]*t[4],y=t[0]*e[5]-e[0]*t[5],s=t[1]*e[2]-e[1]*t[2],u=t[1]*e[4]-e[1]*t[4],x=t[1]*e[5]-e[1]*t[5],p=t[2]*e[3]-e[2]*t[3],c=t[3]*e[4]-e[3]*t[4],h=t[3]*e[5]-e[3]*t[5],f=x+c,l=u-p;return new a(n*s-r*r,n*l+i*s-2*r*o,n*f+i*l-o*o-2*r*y,n*h+i*f-2*o*y,i*h-y*y)},t}(),s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addEquals=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scalarAdd=function(e){return new t(this.x+e,this.y+e)},t.prototype.scalarAddEquals=function(t){return this.x+=t,this.y+=t,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractEquals=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scalarSubtract=function(e){return new t(this.x-e,this.y-e)},t.prototype.scalarSubtractEquals=function(t){return this.x-=t,this.y-=t,this},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.multiplyEquals=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.divideEquals=function(t){return this.x/=t,this.y/=t,this},t.prototype.eq=function(t){return this.x===t.x&&this.y===t.y},t.prototype.lt=function(t){return this.x<t.x&&this.y<t.y},t.prototype.lte=function(t){return this.x<=t.x&&this.y<=t.y},t.prototype.gt=function(t){return this.x>t.x&&this.y>t.y},t.prototype.gte=function(t){return this.x>=t.x&&this.y>=t.y},t.prototype.lerp=function(e,n){return new t(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)},t.prototype.distanceFrom=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.min=function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},t.prototype.max=function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},t.prototype.toString=function(){return this.x+","+this.y},t.prototype.setXY=function(t,e){this.x=t,this.y=e},t.prototype.setFromPoint=function(t){this.x=t.x,this.y=t.y},t.prototype.swap=function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.unit=function(){return this.divide(this.length())},t.prototype.unitEquals=function(){return this.divideEquals(this.length()),this},t.prototype.perp=function(){return new t(-this.y,this.x)},t.fromPoints=function(e,n){return new t(n.x-e.x,n.y-e.y)},t}(),a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.coefs=[];for(var n=t.length-1;n>=0;n--)this.coefs.push(t[n])}return t.prototype.eval=function(t){for(var e=0,n=this.coefs.length-1;n>=0;n--)e=e*t+this.coefs[n];return e},t.prototype.multiply=function(e){var n,r=new t;for(n=0;n<=this.getDegree()+e.getDegree();n++)r.coefs.push(0);for(n=0;n<=this.getDegree();n++)for(var i=0;i<=e.getDegree();i++)r.coefs[n+i]+=this.coefs[n]*e.coefs[i];return r},t.prototype.divide_scalar=function(t){for(var e=0;e<this.coefs.length;e++)this.coefs[e]/=t},t.prototype.simplify=function(){for(var e=this.getDegree();e>=0&&Math.abs(this.coefs[e])<=t.TOLERANCE;e--)this.coefs.pop()},t.prototype.bisection=function(e,n){var r,i=this.eval(e),o=this.eval(n);if(Math.abs(i)<=t.TOLERANCE)r=e;else if(Math.abs(o)<=t.TOLERANCE)r=n;else if(i*o<=0)for(var y=Math.log(n-e),s=Math.log(10)*t.ACCURACY,a=Math.ceil((y+s)/Math.log(2)),u=0;u<a;u++){r=.5*(e+n);var x=this.eval(r);if(Math.abs(x)<=t.TOLERANCE)break;x*i<0?(n=r,o=x):(e=r,i=x)}return r},t.prototype.toString=function(){var t,e=[],n=[];for(t=this.coefs.length-1;t>=0;t--){var r=this.coefs[t];if(0!==r){var i=r<0?" - ":" + ";r=Math.abs(r),t>0&&1===r?r="x":r+="x",t>1&&(r+="^"+t),n.push(i),e.push(r)}}n[0]=" + "===n[0]?"":"-";var o="";for(t=0;t<e.length;t++)o+=n[t]+e[t];return o},t.prototype.getDegree=function(){return this.coefs.length-1},t.prototype.getDerivative=function(){for(var e=new t,n=1;n<this.coefs.length;n++)e.coefs.push(n*this.coefs[n]);return e},t.prototype.getRoots=function(){var t;switch(this.simplify(),this.getDegree()){case 0:t=[];break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=[]}return t},t.prototype.getRootsInInterval=function(t,e){var n,r,i=[];if(1===this.getDegree())null!=(r=this.bisection(t,e))&&i.push(r);else{var o=this.getDerivative(),y=o.getRootsInInterval(t,e);if(y.length>0){for(r=this.bisection(t,y[0]),null!=r&&i.push(r),n=0;n<=y.length-2;n++)null!=(r=this.bisection(y[n],y[n+1]))&&i.push(r);r=this.bisection(y[y.length-1],e),null!=r&&i.push(r)}else null!=(r=this.bisection(t,e))&&i.push(r)}return i},t.prototype.getLinearRoot=function(){var t=[],e=this.coefs[1];return 0!==e&&t.push(-this.coefs[0]/e),t},t.prototype.getQuadraticRoots=function(){var t=[];if(2===this.getDegree()){var e=this.coefs[2],n=this.coefs[1]/e,r=this.coefs[0]/e,i=n*n-4*r;if(i>0){var o=Math.sqrt(i);t.push(.5*(-n+o)),t.push(.5*(-n-o))}else 0===i&&t.push(.5*-n)}return t},t.prototype.getCubicRoots=function(){var e=[];if(3===this.getDegree()){var n=this.coefs[3],r=this.coefs[2]/n,i=this.coefs[1]/n,o=this.coefs[0]/n,y=(3*i-r*r)/3,s=(2*r*r*r-9*i*r+27*o)/27,a=r/3,u=s*s/4+y*y*y/27,x=s/2;Math.abs(u)<=t.TOLERANCE&&0;var p=void 0;if(u>0){var c=Math.sqrt(u),h=void 0;p=-x+c,h=p>=0?Math.pow(p,1/3):-Math.pow(-p,1/3),p=-x-c,p>=0?h+=Math.pow(p,1/3):h-=Math.pow(-p,1/3),e.push(h-a)}else if(u<0){var f=Math.sqrt(-y/3),l=Math.atan2(Math.sqrt(-u),-x)/3,d=Math.cos(l),m=Math.sin(l),g=Math.sqrt(3);e.push(2*f*d-a),e.push(-f*(d+g*m)-a),e.push(-f*(d-g*m)-a)}else p=x>=0?-Math.pow(x,1/3):Math.pow(-x,1/3),e.push(2*p-a),e.push(-p-a)}return e},t.prototype.getQuarticRoots=function(){var e=[];if(4===this.getDegree()){var n=this.coefs[4],r=this.coefs[3]/n,i=this.coefs[2]/n,o=this.coefs[1]/n,y=this.coefs[0]/n,s=new t(1,-i,r*o-4*y,-r*r*y+4*i*y-o*o).getCubicRoots(),a=s[0],u=r*r/4-i+a;Math.abs(u)<=t.TOLERANCE&&(u=0);var x=void 0,p=void 0;if(u>0){var c=Math.sqrt(u),h=3*r*r/4-c*c-2*i;x=(4*r*i-8*o-r*r*r)/(4*c);var f=h+x,l=h-x,d=void 0;Math.abs(f)<=t.TOLERANCE&&(f=0),Math.abs(l)<=t.TOLERANCE&&(l=0),f>=0&&(d=Math.sqrt(f),e.push(-r/4+(c+d)/2),e.push(-r/4+(c-d)/2)),l>=0&&(d=Math.sqrt(l),e.push(-r/4+(d-c)/2),e.push(-r/4-(d+c)/2))}else if(u>=0&&(x=a*a-4*y)>=-t.TOLERANCE){x<0&&(x=0),x=2*Math.sqrt(x);var h=3*r*r/4-2*i;h+x>=t.TOLERANCE&&(p=Math.sqrt(h+x),e.push(-r/4+p/2),e.push(-r/4-p/2)),h-x>=t.TOLERANCE&&(p=Math.sqrt(h-x),e.push(-r/4+p/2),e.push(-r/4-p/2))}}return e},t}();a.TOLERANCE=1e-6,a.ACCURACY=6;var u=function(){function t(t,e){this.type=t,this.text=e}return t.prototype.typeis=function(t){return this.type===t},t}(),x=function(){function t(t){this.segments=null,this.parseData(t)}return t.prototype.appendPathSegment=function(t){t.previous=this.segments[this.segments.length-1],this.segments.push(t)},t.prototype.parseData=function(e){var n=this.tokenize(e),r=0,i=n[r],o="BOD";for(this.segments=[];!i.typeis(t.EOD);){var y=void 0,s=[];if("BOD"===o){if("M"!==i.text&&"m"!==i.text)throw new Error("Path data must begin with a moveto command");r++,y=t.PARAMS[i.text].length,o=i.text}else i.typeis(t.NUMBER)?y=t.PARAMS[o].length:(r++,y=t.PARAMS[i.text].length,o=i.text);if(!(r+y<n.length))throw new Error("Path data ended before all parameters were found");for(var a=r;a<r+y;a++){var u=n[a];if(!u.typeis(t.NUMBER))throw new Error("Parameter type is not a number: "+o+","+u.text);s[s.length]=u.text}var x=void 0,p=this.segments.length,b=0===p?null:this.segments[p-1];switch(o){case"A":x=new c(s,this,b);break;case"C":x=new f(s,this,b);break;case"c":x=new O(s,this,b);break;case"H":x=new l(s,this,b);break;case"L":x=new d(s,this,b);break;case"l":x=new E(s,this,b);break;case"M":x=new m(s,this,b);break;case"m":x=new M(s,this,b);break;case"Q":x=new h(s,this,b);break;case"q":x=new P(s,this,b);break;case"S":x=new v(s,this,b);break;case"s":x=new L(s,this,b);break;case"T":x=new g(s,this,b);break;case"t":x=new A(s,this,b);break;case"Z":case"z":x=new w(s,this,b);break;default:throw new Error("Unsupported segment type: "+o)}this.segments.push(x),r+=y,i=n[r],"M"===o&&(o="L"),"m"===o&&(o="l")}},t.prototype.tokenize=function(e){for(var n=[];""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]=new u(t.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))throw new Error("Unrecognized segment command: "+e);n[n.length]=new u(t.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length)}return n[n.length]=new u(t.EOD,null),n},t.prototype.intersectShape=function(t){for(var e=new y,n=0,r=this.segments;n<r.length;n++){var i=r[n],o=y.intersectShapes(i,t);e.appendPoints(o.points)}return e},t.prototype.asIntersectionParams=function(){return r("Path",[])},t}();x.COMMAND=0,x.NUMBER=1,x.EOD=2,x.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]};var p=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=0;i<e.length;)this.points.push(new s(parseFloat(e[i]),parseFloat(e[i+1]))),i+=2}return t.prototype.toString=function(){var t=this.points.map(function(t){return t.toString()}),e="";return this.previous.command!==this.command&&(e=this.command),e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),c=function(t){function e(e,n,r){var i=t.call(this,"A",e.slice(e.length-2),n,r)||this;return i.rx=parseFloat(e.shift()),i.ry=parseFloat(e.shift()),i.angle=parseFloat(e.shift()),i.arcFlag=parseFloat(e.shift()),i.sweepFlag=parseFloat(e.shift()),i}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+[this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag,this.points[0].toString()].join(",")},e.prototype.asIntersectionParams=function(){return r("Ellipse",[this.center,this.rx,this.ry])},Object.defineProperty(e.prototype,"center",{get:function(){var t,e=this.previous.lastPoint,n=this.points[0],r=this.rx,i=this.ry,o=this.angle*Math.PI/180,y=Math.cos(o),a=Math.sin(o),u=1e-6,x=e.subtract(n).divide(2),p=x.x*y+x.y*a,c=x.x*-a+x.y*y,h=p*p,f=c*c,l=h/(r*r)+f/(i*i);l>1&&(t=Math.sqrt(l),r*=t,i*=t);var d=r*r,m=i*i,g=d*f,v=m*h;t=(d*m-g-v)/(g+v),Math.abs(t)<u&&(t=0);var b=Math.sqrt(t);this.arcFlag===this.sweepFlag&&(b=-b);var w=e.add(n).divide(2),P=b*r*c/i,O=b*-i*p/r;return new s(P*y-O*a+w.x,P*a+O*y+w.y)},enumerable:!0,configurable:!0}),e}(p),h=function(t){function e(e,n,r){return t.call(this,"Q",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(p),f=function(t){function e(e,n,r){return t.call(this,"C",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(p),l=function(t){function e(e,n,r){return t.call(this,"H",[e.pop(),String(r.lastPoint.y)],n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+this.points[0].x},e}(p),d=function(t){function e(e,n,r){return t.call(this,"L",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&"M"!==this.previous.command&&(t=this.command),t+this.points[0].toString()},e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.points[0]])},e}(p),m=function(t){function e(e,n,r){return t.call(this,"M",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){return"M"+this.points[0].toString()},e}(p),g=function(t){function e(e,n,r){return t.call(this,"T",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(p),v=function(t){function e(e,n,r){return t.call(this,"S",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(p),b=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=this.previous?this.previous.lastPoint:new s(0,0),o=0;o<e.length;){var y=new s(i.x+parseFloat(e[o]),i.y+parseFloat(e[o+1]));this.points.push(y),o+=2}}return t.prototype.toString=function(){var t=[],e="",n=this.previous?this.previous.lastPoint:new s(0,0);null!=this.previous&&this.previous.command===this.command||(e=this.command);for(var r=0,i=this.points;r<i.length;r++){var o=i[r],y=o.subtract(n);t.push(y.toString())}return e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),w=function(t){function e(e,n,r){return t.call(this,"z",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastPoint",{get:function(){for(var t,e=this.previous;e;){if(e.command.match(/^[mMzZ]$/)){t=e.lastPoint;break}e=e.previous}return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.lastPoint])},e}(b),P=function(t){function e(e,n,r){return t.call(this,"q",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(b),O=function(t){function e(e,n,r){return t.call(this,"c",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(b),E=function(t){function e(e,n,r){return t.call(this,"l",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t=this.previous?this.previous.lastPoint:new s(0,0),e=this.points[0].subtract(t),n="";return this.previous.command!==this.command&&"m"!==this.previous.command&&(n=this.command),n+e.toString()},e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.points[0]])},e}(b),M=function(t){function e(e,n,r){return t.call(this,"m",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){return"m"+this.points[0].toString()},e}(b),A=function(t){function e(e,n,r){return t.call(this,"t",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(b),L=function(t){function e(e,n,r){return t.call(this,"s",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(b)},241:function(t,e,n){"use strict";var r=n(240),i=[];i.N=i[0]="n",i.NE=i[1]="ne",i.E=i[2]="e",i.SE=i[3]="se",i.S=i[4]="s",i.SW=i[5]="sw",i.W=i[6]="w",i.NW=i[7]="nw";var o=function(){function t(){}return t.prototype.shift=function(){return"number"==typeof arguments[0]?this.shiftImpl(arguments[0],arguments[1]):Array.isArray(arguments[0])?this.shiftImpl(arguments[0][0],arguments[0][1]):this.shiftImpl(arguments[0].x,arguments[0].y),this},Object.defineProperty(t.prototype,"center",{get:function(){return this.bs().xy},enumerable:!0,configurable:!0}),t.prototype.corner=function(t){var e=this.aabb();switch(t){case i.N:return n.i(r.b)(e.cx,e.y);case i.S:return n.i(r.b)(e.cx,e.y2);case i.W:return n.i(r.b)(e.x,e.cy);case i.E:return n.i(r.b)(e.x2,e.cy);case i.NE:return n.i(r.b)(e.x2,e.y);case i.NW:return e.xy;case i.SE:return n.i(r.b)(e.x2,e.y2);case i.SW:return n.i(r.b)(e.x,e.y2)}return this.center},t.prototype.intersects=function(t){return r.c.intersectShapes(this,t)},t}();e.a=o},244:function(t,e,n){"use strict";var r=n(24),i=n(240),o=n(241),y=n(245),s=function(t){function e(e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var i=t.call(this)||this;return i.x=e,i.y=n,i.radius=r,i}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.a(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Circle(x="+this.x+",y="+this.y+",radius="+this.radius+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return new y.a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.bs=function(){return this},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.radius*(t[0]+t[1])/2)},e.prototype.asIntersectionParams=function(){return{name:"Circle",params:[this.xy,this.radius]}},e}(o.a);e.a=s},245:function(t,e,n){"use strict";var r=n(24),i=n(240),o=n(241),y=n(244),s=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.w=r,o.h=i,o}return r.a(e,t),e.prototype.eq=function(t){return this.x===t.x&&this.y===t.y&&this.w===t.w&&this.h===t.h},e.prototype.toString=function(){return"Rect(x="+this.x+",y="+this.y+",w="+this.w+",h="+this.h+")"},Object.defineProperty(e.prototype,"xy",{get:function(){return new i.a(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return new i.a(this.x2,this.y2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return new i.a(this.w,this.h)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this.x+this.w/2},set:function(t){this.x=t-this.w/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this.y+this.h/2},set:function(t){this.y=t-this.y/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.x+this.w},set:function(t){this.w=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.y+this.h},set:function(t){this.h=t-this.y},enumerable:!0,configurable:!0}),e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return this},e.prototype.bs=function(){return new y.a(this.cx,this.cy,Math.sqrt(2*this.w+2*this.h)/2)},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.w*t[0],this.h*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Rectangle",params:[this.xy,this.x2y2]}},e}(o.a);e.a=s},248:function(t,e,n){"use strict";var r=n(24),i=n(240),o=n(241),y=n(244),s=n(245),a=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.radiusX=r,o.radiusY=i,o}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.a(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Ellipse(x="+this.x+",y="+this.y+",radiusX="+this.radiusX+",radiusY="+this.radiusY+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return new s.a(this.x-this.radiusX,this.y-this.radiusY,2*this.radiusX,2*this.radiusY)},e.prototype.bs=function(){return new y.a(this.x,this.y,Math.max(this.radiusX,this.radiusY))},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.radiusX*t[0],this.radiusY*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Ellipse",params:[this.xy,this.radiusX,this.radiusY]}},e}(o.a);e.a=a},249:function(t,e,n){"use strict";var r=n(24),i=n(240),o=n(241),y=n(244),s=n(245),a=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x1=e,o.y1=n,o.x2=r,o.y2=i,o}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.a(this.x1,this.y1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1y1",{get:function(){return this.xy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return new i.a(this.x2,this.y2)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Line(x1="+this.x1+",y1="+this.y1+",x2="+this.x2+",y2="+this.y2+")"},e.prototype.shiftImpl=function(t,e){this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e},e.prototype.aabb=function(){return new s.a(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x1-this.x2),Math.abs(this.y1-this.y2))},e.prototype.bs=function(){var t=.5*(this.x1+this.x2),e=.5*(this.y1+this.y2),n=this.x1-this.x2,r=this.y1-this.y2;return new y.a(t,e,Math.sqrt(n*n+r*r)/2)},e.prototype.transform=function(t,n){return new e(this.x1*t[0],this.y1*t[1],this.x2*t[0],this.y2*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Line",params:[this.xy,this.x2y2]}},e}(o.a);e.a=a},250:function(t,e,n){"use strict";var r=n(24),i=n(240),o=n(241),y=n(244),s=n(245),a=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n.points=e,n}return r.a(e,t),e.prototype.push=function(){2===arguments.length&&"number"==typeof arguments[0]?this.points.push(new i.a(arguments[0],arguments[1])):(t=this.points).push.apply(t,Array.from(arguments));var t},e.prototype.toString=function(){return"Polygon("+this.points.join(",")+")"},e.prototype.shiftImpl=function(t,e){this.points.forEach(function(n){n.x+=t,n.y+=e})},Object.defineProperty(e.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),e.prototype.aabb=function(){var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return this.points.forEach(function(i){i.x<t&&(t=i.x),i.y<e&&(e=i.y),i.x>n&&(n=i.x),i.y>r&&(r=i.y)}),new s.a(t,e,n-t,r-e)},e.prototype.bs=function(){var t=this.centroid,e=0;return this.points.forEach(function(n){var r=n.x-t.x,i=n.y-t.x,o=r*r+i*i;o>e&&(e=o)}),new y.a(t.x,t.y,Math.sqrt(e))},e.prototype.transform=function(t,n){return new e(this.points.map(function(e){return new i.a(e.x*t[0],e.y*t[1])}))},e.prototype.pointInPolygon=function(t){for(var e=this.points.length,n=0,r=this.points[0],i=1;i<=e;i++){var o=this.points[i%e];if(t.y>Math.min(r.y,o.y)&&t.y<=Math.max(r.y,o.y)&&t.x<=Math.max(r.x,o.x)&&r.y!==o.y){var y=(t.y-r.y)*(o.x-r.x)/(o.y-r.y)+r.x;(r.x===o.x||t.x<=y)&&n++}r=o}return n%2==1},Object.defineProperty(e.prototype,"area",{get:function(){for(var t=0,e=this.points.length,n=0;n<e;n++){var r=this.points[n],i=this.points[(n+1)%e];t+=r.x*i.y-i.x*r.y}return t/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centroid",{get:function(){for(var t=this.points.length,e=6*this.area,n=0,r=0,o=0;o<t;o++){var y=this.points[o],s=this.points[(o+1)%t],a=y.x*s.y-s.x*y.y;n+=(y.x+s.x)*a,r+=(y.y+s.y)*a}return new i.a(n/e,r/e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClockwise",{get:function(){return this.area<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCounterClockwise",{get:function(){return this.area>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConcave",{get:function(){for(var t=0,e=0,n=this.points.length,r=0;r<n;r++){var o=this.points[r],y=this.points[(r+1)%n],s=this.points[(r+2)%n],a=i.a.fromPoints(o,y),u=i.a.fromPoints(y,s);a.cross(u)<0?e++:t++}return 0!==e&&0!==t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConvex",{get:function(){return!this.isConcave},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return{name:"Polygon",params:[this.points.slice()]}},e}(o.a);e.a=a},255:function(t,e,n){"use strict";function r(t,e,n,r){return new u.a(t,e,n,r)}function i(t,e,n){return new x.a(t,e,n)}function o(t,e,n,r){return new h.a(t,e,n,r)}function y(t,e,n,r){return new c.a(t,e,n,r)}function s(){return Array.isArray(arguments[0])?new p.a(arguments[0]):new p.a(Array.from(arguments))}function a(t){if(!t)return t;if(t instanceof f.a)return t;if(t.hasOwnProperty("x")&&t.hasOwnProperty("y")){if(t.hasOwnProperty("radius")||t.hasOwnProperty("r"))return i(t.x,t.y,t.hasOwnProperty("radius")?t.radius:t.r);if((t.hasOwnProperty("radiusX")||t.hasOwnProperty("rx"))&&(t.hasOwnProperty("radiusY")||t.hasOwnProperty("ry")))return o(t.x,t.y,t.hasOwnProperty("radiusX")?t.radiusX:t.rx,t.hasOwnProperty("radiusY")?t.radiusY:t.ry);if(t.hasOwnProperty("w")&&t.hasOwnProperty("h"))return r(t.x,t.y,t.w,t.h);if(t.hasOwnProperty("width")&&t.hasOwnProperty("height"))return r(t.x,t.y,t.width,t.height)}return t.hasOwnProperty("x1")&&t.hasOwnProperty("y1")&&t.hasOwnProperty("x2")&&t.hasOwnProperty("y2")?y(t.x1,t.y1,t.x2,t.y2):Array.isArray(t)&&t.length>0&&t[0].hasOwnProperty("x")&&t[0].hasOwnProperty("y")?s(t):t}var u=(n(240),n(245)),x=n(244),p=n(250),c=n(249),h=n(248),f=n(241);e.a=a},53:function(t,e,n){"use strict";function r(t,e,n,r,i){var o=e.dimOf(t.idtype),y=r.dimOf(t.idtype);return Promise.all([e.ids(),r.ids()]).then(function(e){var r=e[0].dim(o),s=e[1].dim(y);return t.createBand(n,i,r,s,r.intersect(s),"block","rel-block")})}function i(t){return Array.isArray(t)?t:[t]}function o(t,e,r,o,y){function s(t){return t instanceof u.g?t.groups:[n.i(u.h)(t)]}var a=e.dimOf(t.idtype),x=o.dimOf(t.idtype);return Promise.all([e.ids(),o.ids()]).then(function(t){var r=s(t[0].dim(a)),i=s(t[1].dim(x)),y=r.map(function(t){var e=n.i(u.e)();return e.dims[a]=t,e}),p=i.map(function(t){var e=n.i(u.e)();return e.dims[x]=t,e});return Promise.all([Promise.resolve({groupa:r,groupb:i}),e.locateById.apply(e,y),o.locateById.apply(o,p)])}).then(function(e){function n(t){return function(e,n){return{g:e,len:e.length,loc:t[n]?t[n].aabb():null}}}var r=e[0].groupa.map(n(i(e[1]))),o=e[0].groupb.map(n(i(e[2]))),y=[];return r.forEach(function(e){o.forEach(function(n){var r=e.g.intersect(n.g),i=r.length;if(0!==i){var o=e.g.name+"-"+n.g.name;e.loc&&n.loc&&(y.push.apply(y,t.createBand(e.loc,n.loc,e.g,n.g,r,o,"rel-group")),e.loc.y+=e.loc.h*(i/e.len),n.loc.y+=n.loc.h*(i/n.len))}})}),y})}function y(t,e){var n=t.aabb(),r=e.aabb();return n.cx>r.cx?["w","e"]:["e","w"]}function s(t,e,r,o,s){function x(t,e,n){if(!n)return t.center;var r=y(t,e);return t.corner(r[0])}var p=e.dimOf(t.idtype),c=o.dimOf(t.idtype),h=e.data.dim.length>1,f=o.data.dim.length>1;return Promise.all([e.ids(),o.ids()]).then(function(t){var r=t[0].dim(p),i=t[1].dim(c),y=r.intersect(i),s=[],a=[];return y.forEach(function(t){var e=n.i(u.e)();e.dim(p).setList([t]),s.push(e);var r=n.i(u.e)();r.dim(c).setList([t]),a.push(r)}),Promise.all([Promise.resolve(y),e.locateById.apply(e,s),o.locateById.apply(o,a)])}).then(function(e){var r=e[0],o=i(e[1]),y=i(e[2]),s=[];t.line.interpolate("linear");var p=t.idtype.selections().dim(0);return r.forEach(function(e,r){var i=n.i(a.a)(o[r]),c=n.i(a.a)(y[r]);i&&c&&s.push({clazz:"rel-item"+(p.contains(e)?" phovea-select-selected":""),id:String(e),d:t.line([x(i,c,h),x(c,i,f)]),range:n.i(u.a)([e])})}),s})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(255),u=n(217);e.createBlockRep=r,e.createGroupRep=o,e.createItemRep=s}});